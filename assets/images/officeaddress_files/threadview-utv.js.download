(window.webpackJsonp=window.webpackJsonp||[]).push([["threadview-utv"],{"+a0K":function(e,t){function s(e,t){return e===t||e!=e&&t!=t}e.exports=s},"/Dz0":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s.d(t,"b",(function(){return i}));var n=s("dLEV"),a=s("KrP/");const r=Object(n.createAction)(a.h);function i(){return e=>{e(r())}}},"/TWJ":function(e,t){function s(e,t){return null==e?void 0:e[t]}e.exports=s},"1HZx":function(e,t,s){"use strict";var n=s("Ktcs"),a=s("OwpT"),r=s.n(a),i=s("ughT"),o=s("l6Ux"),c=s("w/SM"),l=s("npjq"),d=s("QYOI"),u=s("VfuR"),p=s.n(u),h=s("9f1P"),m=s.n(h),b=s("mEYk"),g=s.n(b),j=s("QgEn");const f=m.a.div.withConfig({displayName:"MessageComposer__FullWidth",componentId:"d88cgl-0"})(["width:100%;"]),O=m.a.div.withConfig({displayName:"MessageComposer__InputWrapper",componentId:"d88cgl-1"})(["display:flex;width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;"]);function x({FileUploads:e=null,showingHsBranding:t=!1,inputToRender:s,children:n}){const a="input-container m-bottom-2"+(t?"":" no-branding");return Object(j.jsxs)("div",{className:a,children:[e&&Object(j.jsx)(f,{children:e}),Object(j.jsxs)(O,{children:[s,n&&Object(j.jsx)("div",{className:"display-flex flex-row m-left-1 no-shrink",children:n})]})]})}x.displayName="MessageComposer";var y=x,v=s("S2sp"),C=s("Lm/k");const T=Object(n.createContext)(void 0),w=T.Consumer,I=(T.Provider,e=>{Object(n.useEffect)(()=>{const t=t=>{if(e(t)){t.stopPropagation();t.preventDefault()}};document.addEventListener("touchmove",t,{passive:!1});return()=>{document.removeEventListener("touchmove",t)}},[e])}),S=["onBlur","onFocus"],k=()=>{},R=e=>{const t=Object(n.forwardRef)((t,s)=>{const{onBlur:a,onFocus:r}=t,i=Object(C.a)(t,S),o=Object(n.useRef)(),c=s||o,[l,d]=Object(n.useState)(null);I(e=>{if(l&&e.target!==l){c.current&&c.current.blur();d(null);return!1}return Boolean(l)});const u=e=>{d(null);a(e)},p=e=>{e.target&&d(e.target);r(e)};return Object(j.jsx)(e,Object.assign({},i,{ref:c,onFocus:p,onBlur:u}))});t.propTypes={onBlur:p.a.func,onFocus:p.a.func};t.defaultProps={onBlur:k,onFocus:k};t.displayName="Component";return t};R.propTypes={onBlur:p.a.func.isRequired,onFocus:p.a.func.isRequired};var A=R,N=s("CR0J"),P=s("Mcxo");const E=["aria-label","error","validationMessage","required","theme","children"],M={error:!1,required:!1},_=m.a.div.withConfig({displayName:"VizExFormControl__FormControlWrapper",componentId:"i8xgi2-0"})(["width:100%;flex-basis:100%;"]);class F extends n.Component{constructor(...e){super(...e);this.getChildProps=({ariaLabel:e,newError:t,newRequired:s,validationMessage:n,fallbackId:a,ref:r})=>{const i={"aria-label":e,required:s,"aria-invalid":t,"aria-required":s,ref:r};a&&(i.id=a);t&&(i.error=n);return i}}render(){const e=this.props,{"aria-label":t,error:s,validationMessage:n,required:a,theme:r,children:i}=e,o=Object(C.a)(e,E),c=i(Object.assign({},this.getChildProps({ariaLabel:t,newError:s,newRequired:a,validationMessage:n})));return Object(j.jsxs)(_,Object.assign({},o,{children:[c,n?Object(j.jsx)(P.a,{use:s?"error":"default",theme:r,children:n}):null]}))}}F.displayName="VizExFormControl";F.propTypes={"aria-label":p.a.string,children:p.a.func.isRequired,error:p.a.bool,required:p.a.bool,theme:N.a,validationMessage:p.a.node};F.defaultProps=M;F.defaultProps=M;var L=F,q=s("8Q5G"),B=s("57op");const H=B.f,z=B.e,D=B.c,V=B.a,U=B.b,Q=B.g,W="unstyled",G="default",Y=e=>(new DOMParser).parseFromString(e,"text/html").body.textContent||"",K=["onInput","placeholder","onChange","value","maxHeight","disabled","shouldAutofocus","onPaste"],J=e=>""===e.trim()||"<br />"===e.trim()||"<br>"===e.trim()||"<br/>"===e.trim(),X=()=>Object(h.css)(["outline:none;"]),$=({use:e,theme:t})=>{switch(e){case W:return Object(h.css)(["border:none;background-color:transparent;"]);case G:default:return Object(h.css)(["border:2px solid;border-color:",";background-color:",";"],H(t),z(t))}},Z=({theme:e})=>Object(h.css)(["cursor:not-allowed;background-color:",";color:",";&[contenteditable][placeholder]:empty::after{color:",";cursor:not-allowed;}"],V(e),U(e),U(e)),ee=({theme:e})=>Object(h.css)(["border:2px solid;border-color:",";"],D(e)),te=m.a.div.withConfig({displayName:"VizExExpandingInput__StyledInput",componentId:"sc-1mcdde4-0"})(["border-radius:3px;font-size:16px;line-height:22px;min-height:40px;max-height:",";overflow-x:hidden;overflow-y:auto;padding:8px;position:relative;width:100%;flex-basis:100%;word-break:break-word;cursor:text;",";",";@supports (-webkit-touch-callout:none){cursor:pointer;}&[contenteditable][placeholder]:empty{overflow-y:hidden;}&[contenteditable][placeholder]:empty::after{display:block;content:attr(placeholder);position:relative;color:",";background-color:transparent;cursor:text;user-select:none;font-size:16px;line-height:22px;height:22px;}@media all and (-ms-high-contrast:none){&[contenteditable][placeholder]:empty::after{position:absolute;top:50%;transform:translateY(-50%);}}:focus{",";}",";",";"],({maxHeight:e})=>"number"==typeof e?e+"px":e||"150px",({focus:e})=>e&&X(),$,({theme:e})=>Q(e),X,e=>e.disabled&&Z(e),e=>e.error&&ee(e)),se=Object(n.forwardRef)((e,t)=>{const s="function"!=typeof t&&t||Object(n.useRef)(null),{onInput:a,placeholder:r,onChange:i,value:o,maxHeight:c,disabled:l,shouldAutofocus:d,onPaste:u}=e,p=Object(C.a)(e,K),h=(e,...t)=>{e.persist();if(s.current&&s.current.innerHTML&&J(s.current.innerHTML)){s.current.innerHTML="";e.target.innerText=""}e.target.value=e.target.innerText;Object(q.a)(i,e,...t);Object(q.a)(a,e,...t)},m=e=>{e.preventDefault();Object(q.a)(u,e);if(!e.clipboardData.files||!e.clipboardData.files[0]){let t;try{t=e.clipboardData.getData("text/plain")}catch(s){t=Y(e.clipboardData.getData("text"))}document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)}};Object(n.useLayoutEffect)(()=>{null!=o&&s.current&&o!==s.current.innerText&&(s.current.innerText=o||"")},[s,o]);Object(n.useEffect)(()=>{d&&s&&s.current&&s.current.focus()},[]);return Object(j.jsx)(te,Object.assign({},p,{ref:s,placeholder:r,onInput:h,onPaste:m,contentEditable:!l,maxHeight:c,disabled:l,"aria-disabled":l}))});se.displayName="VizExExpandingInput";se.propTypes={disabled:p.a.bool,error:p.a.bool,maxHeight:p.a.number,onChange:p.a.func,onInput:p.a.func,onPaste:p.a.func,placeholder:p.a.string,shouldAutofocus:p.a.bool,theme:N.a,use:p.a.oneOf([W,G]),value:p.a.string};const ne=()=>!!/iPad|iPhone|iPod|Android|Mobi/.test(navigator.userAgent),ae=["disableInitialInputFocus","disabled","error","messageText","onChange","onInputBlur","onInputFocus","onKeyDown","validationMessage","showQuickReplyPlaceholder","onPaste"],re=A(se),ie=Object(n.forwardRef)((e,t)=>{let{disableInitialInputFocus:s,disabled:n,error:a,messageText:r,onChange:i,onInputBlur:o,onInputFocus:c,onKeyDown:d,validationMessage:u,showQuickReplyPlaceholder:p,onPaste:h}=e,m=Object(C.a)(e,ae);return Object(j.jsx)(w,{children:e=>Object(j.jsx)(L,{"aria-label":l.a.text(p?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),validationMessage:u,error:a,required:!0,children:u=>Object(j.jsx)(re,Object.assign({},u,{use:"unstyled",error:a,className:"widget-textarea message-box","data-test-id":"widget-textarea",tabIndex:"0",ref:t,maxHeight:100,placeholder:l.a.text(p?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),disabled:n,onChange:i,onKeyDown:d,value:r,onFocus:c,onBlur:o,onPaste:h,shouldAutofocus:!(s||ne())},m))})})});ie.propTypes={disableInitialInputFocus:p.a.bool.isRequired,disabled:p.a.bool.isRequired,error:p.a.bool.isRequired,messageText:p.a.string.isRequired,onChange:p.a.func.isRequired,onInputBlur:p.a.func,onInputFocus:p.a.func,onKeyDown:p.a.func.isRequired,onPaste:p.a.func,showQuickReplyPlaceholder:p.a.bool.isRequired,validationMessage:p.a.string.isRequired};ie.displayName="TextInput";var oe=ie,ce=s("sl/w"),le=s("r1tY"),de=s.n(le),ue=s("/mXs");const pe=["left","right"],he=["top","bottom"],me=["left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right","top center","bottom center","left middle","right middle"],be=[...pe,...he,...me];function ge(e){return e.split(" ")[0]}function je(e){return pe.includes(e)}function fe(e){const t=e.split(" ")[1];return t||(je(ge(e))?"middle":"center")}const Oe=16,xe=8,ye=({placement:e})=>{switch(ge(e)){case"top":return Object(h.css)(["transform:rotate(45deg);top:-","px;"],Oe+5);case"right":return Object(h.css)(["transform:rotate(135deg);right:-","px;"],Oe+5);case"bottom":return Object(h.css)(["transform:rotate(-135deg);bottom:-","px;"],Oe+5);case"left":return Object(h.css)(["transform:rotate(-45deg);left:-","px;"],Oe+5);default:return""}},ve=({placement:e})=>{switch(fe(e)){case"top":return Object(h.css)(["top:","px;"],xe);case"middle":return Object(h.css)(["top:calc(50% - ","px);"],Oe/2);case"bottom":return Object(h.css)(["bottom:","px;"],xe);case"left":return Object(h.css)(["left:","px;"],xe);case"center":return Object(h.css)(["left:calc(50% - ","px);"],Oe/2);case"right":return Object(h.css)(["right:","px;"],xe);default:return""}},Ce=({placement:e})=>Object(h.css)(["",";",";"],ye({placement:e}),ve({placement:e}));var Te=s("iKGd");const we="#425b76",Ie=()=>we,Se=()=>Te.o;var ke=m.a.div.withConfig({displayName:"VizExTooltipArrow",componentId:"fpnjga-0"})(["position:absolute;pointer-events:none;border:none;clip-path:polygon(100% 100%,0 100%,100% 0);border-top-left-radius:100%;border-radius:3px;border-top-color:transparent !important;border-left-color:transparent !important;border-bottom-right-radius:3px;width:16px;height:16px;background-color:",";",""],({backgroundColor:e})=>e||Ie(),({placement:e})=>Ce({placement:e}));const Re=16,Ae=({placement:e})=>{switch(fe(e)){case"top":return Object(h.css)(["top:0;"]);case"bottom":return Object(h.css)(["bottom:0;"]);case"left":return Object(h.css)(["left:0;"]);case"right":return Object(h.css)(["right:0;"]);default:return""}},Ne=({placement:e})=>{switch(ge(e)){case"top":return Object(h.css)(["transform:translateY(-100%);top:-","px;"],Re-5);case"right":return Object(h.css)(["transform:translateX(100%);right:-","px;"],Re-5);case"bottom":return Object(h.css)(["transform:translateY(100%);bottom:-","px;"],Re-5);case"left":return Object(h.css)(["transform:translateX(-100%);left:-","px;"],Re-5);default:return""}},Pe=({placement:e})=>{switch(e){case"top center":case"top middle":return Object(h.css)(["transform:translate(-50%,-100%);left:50%;"]);case"bottom middle":case"bottom center":return Object(h.css)(["transform:translate(-50%,100%);left:50%;"]);case"left center":case"left middle":return Object(h.css)(["transform:translate(-100%,-50%);top:50%;"]);case"right center":case"right middle":return Object(h.css)(["transform:translate(100%,-50%);top:50%;"]);default:return""}},Ee=({placement:e})=>Object(h.css)(["",";",";",""],Ne({placement:e}),Ae({placement:e}),Pe({placement:e}));var Me=m.a.div.withConfig({displayName:"VizExTooltipBody",componentId:"sc-1pk91td-0"})(["border-radius:3px;font-size:13px;width:max-content;max-width:232px;display:block;position:absolute;visibility:visible;box-shadow:0 3px 8px rgba(0,0,0,0.1);line-height:1.5;padding:10px 16px;text-decoration:none;word-wrap:break-word;",";background-color:",";color:",";pointer-events:",";"],({placement:e})=>Ee({placement:e}),({backgroundColor:e})=>e||Ie(),({textColor:e})=>e||Se(),({open:e})=>e?"all":"none"),_e=s("0ePj");function Fe(e){let[t,s]=Object(_e.a)(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:s,open(){s(!0)},close(){s(!1)},toggle(){s(!t)}}}const Le=1500,qe=500;let Be={},He=0,ze=!1,De=null,Ve=null;function Ue(e={}){let{delay:t=Le}=e,{isOpen:s,open:a,close:r}=Fe(e),i=Object(n.useMemo)(()=>""+ ++He,[]),o=Object(n.useRef)(),c=()=>{Be[i]=u},l=()=>{for(let e in Be)if(e!==i){Be[e](!0);delete Be[e]}},d=()=>{clearTimeout(o.current);o.current=null;l();c();ze=!0;a();if(De){clearTimeout(De);De=null}if(Ve){clearTimeout(Ve);Ve=null}},u=e=>{if(e){clearTimeout(o.current);o.current=null;r()}else o.current||(o.current=setTimeout(()=>{o.current=null;r()},qe));if(De){clearTimeout(De);De=null}if(ze){Ve&&clearTimeout(Ve);Ve=setTimeout(()=>{delete Be[i];Ve=null;ze=!1},qe)}},p=()=>{l();c();s||De||ze?s||d():De=setTimeout(()=>{De=null;ze=!0;d()},t)};Object(n.useEffect)(()=>()=>{clearTimeout(o.current);Be[i]&&delete Be[i]},[i]);return{isOpen:s,open:e=>{!e&&t>0&&!o.current?p():d()},close:u}}var Qe=s("dByS"),We=s("xr6y"),Ge=s("Zulv");const Ye=["placement","delay","content","backgroundColor","textColor","children","theme","onOpenChange","open"],Ke=m.a.div.withConfig({displayName:"VizExTooltip__Popover",componentId:"sc-1jec6vp-0"})(["transition-property:",";transition-duration:","ms;opacity:",";transform:",";position:absolute;pointer-events:none;width:100%;height:100%;"],({transitioning:e})=>e?"opacity ease-out, transform ease-out":"none",({duration:e})=>e,({open:e})=>e?"1":"0",({open:e,transitioning:t})=>e&&!t?"none":e?"scale(1)":"scale(.75)"),Je=m.a.div.withConfig({displayName:"VizExTooltip__PopoverWrapper",componentId:"sc-1jec6vp-1"})(["display:inline-block;position:relative;"]),Xe=e=>{let{placement:t="top right",delay:s=0,content:a,backgroundColor:r,textColor:i,children:o,theme:c,onOpenChange:l,open:d}=e,u=Object(C.a)(e,Ye);const p="boolean"==typeof d,h=Object.assign({delay:s},p&&{isOpen:d}),m=Object(n.useRef)(null),b=Ue(h),{triggerProps:g,tooltipProps:f}=Object(Qe.a)(h,b,m),{keyboardProps:O}=Object(We.h)({onKeyUp:g.onKeyUp,onKeyDown:g.onKeyDown});if(!Object(n.isValidElement)(o))return null;if(!a)return o;const x=()=>{if(!p){Object(q.a)(l,!0);b.open(!0)}},y=()=>{if(!p){Object(q.a)(l,!1);b.close(!0)}};return Object(j.jsxs)(Je,Object.assign({},u,{onMouseEnter:x,onMouseLeave:y,children:[Object(j.jsxs)(Ke,{open:b.isOpen,duration:250,transitioning:!0,"data-test-id":"tooltip-popover",children:[Object(j.jsx)(Me,Object.assign({textColor:i,backgroundColor:r,placement:t,open:b.isOpen,theme:c,"data-test-open":b.isOpen},f,{"aria-hidden":!0,children:a})),Object(j.jsx)(ke,{backgroundColor:r,placement:t,theme:c})]}),Object(n.cloneElement)(n.Children.only(o),Object.assign({},Object(Ge.i)(g,O),{onClick:o.props.onClick,ref:m}))]}))};Xe.propTypes={backgroundColor:p.a.string,children:p.a.node.isRequired,content:p.a.node,delay:p.a.number,onOpenChange:p.a.func,open:p.a.bool,placement:p.a.oneOf(be),textColor:p.a.string,theme:N.a};Xe.displayName="VizExTooltip";var $e=Xe,Ze=s("P7jJ"),et=s("tOFb");const tt=m.a.input.withConfig({displayName:"AttachmentPickerButton__HiddenInput",componentId:"sc-1ecb91c-0"})(["display:none;"]);class st extends n.PureComponent{constructor(e){super(e);this.inputRefCallback=e=>{this.inputRef=e};this.findInputNode=()=>{if(!this.inputRef)return null;return de.a.findDOMNode(this.inputRef)};this.clearInputNode=()=>{const e=this.findInputNode();e&&(e.value="")};this.handlePickerClick=e=>{const t=this.findInputNode();t&&t.click();this.props.onClick(e)};this.onInputChange=({target:{files:e}})=>{this.props.onSelectFiles({files:e});this.clearInputNode()};this.renderMaxFileSizeTooltip=()=>{if(!this.props.mobile)return Object(j.jsx)(ce.a,{message:"conversations-visitor-ui.fileSizeLimit",options:{size:l.a.formatSize(this.props.maxAttachmentFileSize)}})};this.inputRef=null}render(){const{disabled:e}=this.props;return Object(j.jsxs)(n.Fragment,{children:[Object(j.jsx)($e,{content:this.renderMaxFileSizeTooltip(),placement:"top right",children:Object(j.jsx)(ue.a,{disabled:e,onClick:this.handlePickerClick,use:"transparent-on-background","aria-label":l.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.attachment"),shape:"circle","data-test-id":"AttachmentPickerButton-VizExIconButton",children:Object(j.jsx)(Ze.a,{icon:Object(j.jsx)(et.a,{})})})}),Object(j.jsx)(tt,{accept:this.props.accept.join(","),"data-selenium-test":"visitor-attachment-file-input","data-test-id":"AttachmentPickerButton-input",disabled:this.props.disabled,ref:this.inputRefCallback,type:"file",multiple:this.props.allowMultiple,onChange:this.onInputChange})]})}}st.displayName="AttachmentPickerButton";st.defaultProps={accept:[],allowMultiple:!1,onClick:()=>{}};var nt=st,at=s("qKTc"),rt=s("Xs/R");const it={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ot=`(?:${Object.keys(it).join("|")})`,ct=RegExp(ot),lt=RegExp(ot,"g");function dt(e){e=null==e?"":""+e;return ct.test(e)?e.replace(lt,e=>it[e]):e}const ut=m.a.div.withConfig({displayName:"MessageEditor__FileUploadWrapper",componentId:"sc-142mntr-0"})(["display:flex;overflow:auto;& > *:not(:last-child){margin-right:8px;}"]);let pt=!1;const ht=Object(n.forwardRef)(({canUploadAttachments:e,chatInputChanged:t,coloring:{accentColor:s,useDefaultColor:a}={},disablePublish:d,disabled:u,fileTypes:p,inputStaging:h,maxAttachmentFileSize:m,mobile:b,networkOffline:f,onAttachmentButtonClick:O,onRemoveAttachment:x,onSelectAttachmentFiles:C,publishMessage:T,shouldDisableInitialInputFocus:w,shouldHideAttachmentButton:I,shouldSendInputStagingEvent:S,showQuickReplyPlaceholder:k,showingHsBranding:R,stagedAttachments:A,stagedMessageEditorText:N,supportsAttachments:P,toggleOnAndOffInputFocus:E},M)=>{const[_,F]=Object(n.useState)(!1),[L,q]=Object(n.useState)(N||""),B=Object(n.useRef)(),H=M||B,z=()=>{null!=H&&H.current&&H.current.focus()};Object(n.useEffect)(()=>{u||w||ne()||null==H||!H.current||H.current.focus()},[H,u,w]);const D=()=>L,V=()=>D().length<c.a,U=()=>A&&A.size,Q=()=>!A||A.every(o.isUploadCompleted),W=()=>{const e=Boolean(D())&&""!==D().trim();return V()&&Q()&&(e||U())},G=()=>W()&&!f&&!u&&!d,Y=e=>{const s=e.target.value;q(s);S&&!s&&h(s,!0);t(s);if((u||d)&&!pt){g.a.captureMessage("VISITOR_CAN_TYPE_WHILE_PUBLISH_DISABLED");pt=!0}},K=()=>{if(G()){const e=D(),t=`<div>${r.a.link(dt(e),{stripPrefix:!1})}</div>`.replace(/\n/g,"<br>");T({text:e,richText:t});q("");h("",!0);z()}},J=e=>{if("Enter"===e.key&&!1===e.shiftKey&&!_){K();e.preventDefault();e.stopPropagation();return!1}return!0},X=()=>V()?"":l.a.text("conversations-visitor-ui.chatTextArea.validationMessage"),$=({files:e})=>{C({files:e});z()},Z=()=>{u||E(!0)},ee=()=>{E(!1)},te=t=>{var s;null!=t&&null!==(s=t.clipboardData)&&void 0!==s&&s.files&&e&&C({files:t.clipboardData.files})},se=Object(j.jsx)(oe,{disableInitialInputFocus:w,disabled:u||f||d,error:!V(),messageText:L,onChange:Y,onKeyDown:J,showQuickReplyPlaceholder:k,ref:H,showingHsBranding:R,validationMessage:X(),onInputFocus:Z,onInputBlur:ee,onPaste:te,onCompositionStart:()=>F(!0),onCompositionEnd:()=>F(!1)}),ae=U()?Object(j.jsx)(ut,{className:"m-bottom-2"+(R?" m-top-2":""),children:A.map(e=>Object(j.jsx)("div",{"data-test-id":"MessageEditor-FileUploadItem",children:Object(j.jsx)(v.a,{attachment:e,onRemove:()=>{x({attachment:e})}})},Object(i.getLocalId)(e)))}):null,re=a?null:s,ie=!G();return Object(j.jsx)(y,{inputToRender:se,FileUploads:ae,showingHsBranding:R,children:Object(j.jsxs)(n.Fragment,{children:[P&&!I?Object(j.jsx)("div",{className:b?"m-right-3":"",children:Object(j.jsx)(nt,{accept:p,color:re,disabled:!e||u,mobile:b,onClick:O,onSelectFiles:$,maxAttachmentFileSize:m})}):null,Object(j.jsx)(ue.a,{className:"chat-send-button","data-test-id":"chat-send-button",disabled:ie,shape:"circle",onClick:K,use:"transparent-on-background","aria-label":l.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.send"),children:Object(j.jsx)(Ze.a,{icon:Object(j.jsx)(rt.a,{})})})]})})});ht.propTypes={canUploadAttachments:p.a.bool.isRequired,chatInputChanged:p.a.func.isRequired,coloring:p.a.object,disablePublish:p.a.bool.isRequired,disabled:p.a.bool.isRequired,fileTypes:p.a.arrayOf(p.a.string).isRequired,inputStaging:p.a.func.isRequired,maxAttachmentFileSize:p.a.number.isRequired,mobile:p.a.bool,networkOffline:p.a.bool.isRequired,onAttachmentButtonClick:p.a.func,onRemoveAttachment:p.a.func.isRequired,onSelectAttachmentFiles:p.a.func.isRequired,publishMessage:p.a.func.isRequired,shouldDisableInitialInputFocus:p.a.bool,shouldHideAttachmentButton:p.a.bool,shouldSendInputStagingEvent:p.a.bool.isRequired,showQuickReplyPlaceholder:p.a.bool.isRequired,showingHsBranding:p.a.bool,stagedAttachments:p.a.instanceOf(d.List),stagedMessageEditorText:p.a.string,supportsAttachments:p.a.bool.isRequired,toggleOnAndOffInputFocus:p.a.func};ht.displayName="MessageEditor";ht.defaultProps={isThreadStarted:!0,disablePublish:!1,onRemoveAttachment:()=>{},onSelectAttachmentFiles:()=>{},createNewThread:()=>{},supportsAttachments:!1,fileTypes:at.a,stagedAttachments:[],toggleOnAndOffInputFocus:()=>{}};t.a=ht},"2+Io":function(e,t,s){var n=s("pDio")(s("8i16"),"Map");e.exports=n},"3FHW":function(e,t,s){var n=s("8X3F"),a=s("kmmH"),r="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function l(e){if(!a(e))return!1;var t=n(e);return t==i||t==o||t==r||t==c}e.exports=l},"3yBC":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));s.d(t,"c",(function(){return a}));s.d(t,"a",(function(){return r}));const n="SIZE_LIMIT_EXCEEDED",a="UPLOAD_ERROR",r="INVALID_FILE_TYPE"},"4hT6":function(e,t,s){"use strict";s.r(t);s.d(t,"getFileSize",(function(){return r}));var n=s("JGJA"),a=s("ughT");const r=e=>{const t=Object(a.getFile)(e);return t&&Object(n.a)("size",t)||0}},"5N3d":function(e,t,s){"use strict";s.r(t);s.d(t,"validateAttachmentFile",(function(){return i}));var n=s("3yBC"),a=s("HU6Q"),r=s("z4Bj");const i=e=>{const t=Object(r.a)();Object(a.fileExceedsSizeLimit)(e)?t.reject(n.b):t.resolve();return t.promise}},"5SRO":function(e,t,s){"use strict";var n=s("mKxs"),a=s("VfuR"),r=s.n(a),i=s("9f1P"),o=s.n(i);const c=32,l=e=>"number"==typeof e?e+"px":e;var d=s("Lm/k");const u="1.5s",p="linear",h="infinite",m=Object(i.keyframes)(["100%{transform:translateX(100%);}"]),b=Object(i.css)(["animation:"," "," "," ",";"],m,u,p,h);var g=s("+KD7");const j="default",f="blank",O="on-shade",x="on-dark",y={[j]:{primary:g.j,secondary:g.l},[O]:{primary:g.l,secondary:g.j},[x]:{primary:g.k,secondary:g.t}},v=`\n  background: ${g.r};\n`,C=({primary:e,secondary:t})=>`\n  background: ${e};\n  background: linear-gradient(to right, ${e}, ${t} 20%, ${e} 40%);\n`,T=e=>y[e],w=({use:e})=>e===f?v:C(T(e));var I=s("QgEn");const S=["children"],k=j,R=o.a.div.withConfig({displayName:"SkeletonBase__SkeletonBaseInner",componentId:"wombw1-0"})(["position:relative;margin:",";padding:",";",";width:100%;overflow:hidden;z-index:1;&::after{content:' ';display:block;position:absolute;top:0;left:0;right:0;height:100%;transform:translateX(-100%);",";","}"],({margin:e})=>l(e),({padding:e})=>l(e),({use:e=k})=>e===f?v:"background: "+y[e].primary,({use:e=k})=>e!==f&&b,({use:e=k})=>e!==f&&w({use:e})),A=e=>{let{children:t}=e,s=Object(d.a)(e,S);return Object(I.jsx)(R,Object.assign({"data-loading":"true"},s,{children:t}))};A.displayName="SkeletonBase";A.propTypes={children:r.a.node,className:r.a.string,margin:r.a.oneOfType([r.a.number,r.a.string]),padding:r.a.oneOfType([r.a.number,r.a.string]),use:r.a.oneOf([j,O,x,f])};var N=A;const P=c,E=o()(N).withConfig({displayName:"SkeletonCircle",componentId:"sc-1fmdx16-0"})(["border-radius:50%;width:",";height:",";min-width:",";&::before{border-radius:50%;}"],({size:e=P})=>l(e),({size:e=P})=>l(e),({size:e=P})=>l(e));E.displayName="SkeletonCircle";E.propTypes={size:r.a.number};var M=E,_=s("Ktcs"),F=s("GdKg"),L=s("0IK8"),q=s("lw+E"),B=s("ZyjR");const{staticDomainPrefix:H}=B.bender,z=((e,t=".svg",s=!1)=>`${H}/ui-images/static-2.672/optimized/${e}${s?"-ie11":""}${t}`)("robot-small");var D=s("Mx3c"),V=s("npjq");const U=()=>{};class Q extends _.PureComponent{constructor(e){super(e);this.handleClick=this.handleClick.bind(this)}handleClick(){const{onClick:e,sender:t}=this.props;e(t)}render(){const{isLoading:e,sender:t,size:s}=this.props;if(e)return Object(I.jsx)(M,{size:32});if(!t)return Object(I.jsx)(F.a,{alt:"",size:s});const n=Object(L.getSenderTypeForCMF)(t),a=V.a.text("conversations-visitor-message-history.agent"),r=V.a.text("conversations-visitor-message-history.avatar",{identifier:Object(q.c)(t)||a});switch(n){case D.BOT:case D.SYSTEM:return Object(I.jsx)(F.a,{size:s,src:Object(q.a)(t)||z,alt:r});default:return Object(I.jsx)("span",{onClick:this.handleClick,children:Object(I.jsx)(F.a,{size:s,src:Object(q.a)(t),alt:r})})}}}Q.displayName="SenderAvatar";Q.propTypes={isLoading:r.a.bool,onClick:r.a.func.isRequired,sender:Object(n.a)("Sender"),size:F.a.propTypes.size};Q.defaultProps={onClick:U,size:"sm"};var W=s("yCEM"),G=s("Ydwr");const Y="#cbd6e2",K="#00a4bd";var J=s("AgM1");const X=Object(i.keyframes)(["25%{background-color:",";}75%{background-color:",";}"],Y,Y),$=Object(i.keyframes)(["0%,100%{transform:translateY(0);}25%{transform:translateY(.25em);}50%{transform:translateY(0);}75%{transform:translateY(-.25em);}"]),Z=o.a.div.withConfig({displayName:"TypingDots__Dot",componentId:"sc-1iva3ry-0"})(["position:relative;background-color:currentColor;color:",";border-radius:50%;height:1em;width:1em;animation:",",",";animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;&:not(:last-child){margin-right:0.75em;}&:nth-child(2){animation-delay:-0.66s;}&:nth-child(3){animation-delay:-0.33s;}"],e=>e.color?e.color:K,$,X),ee=o.a.div.withConfig({displayName:"TypingDots__TypingDotsWrapper",componentId:"sc-1iva3ry-1"})(["display:flex;align-items:center;justify-content:center;height:24px;font-size:8px;width:4.5em;"]);class te extends _.Component{render(){const{widgetAccent:e}=this.context;return Object(I.jsxs)(ee,{"data-test-id":"typing-dots",children:[Object(I.jsx)(Z,{color:e,className:"dot-1"}),Object(I.jsx)(Z,{color:e,className:"dot-2"}),Object(I.jsx)(Z,{color:e,className:"dot-3"})]})}}te.displayName="TypingDots";te.contextType=J.a;var se=te,ne=r.a.oneOf([W.b,W.a,W.c]),ae=s("vVnP"),re=s("Gc2C"),ie=s("pcz0");const oe=e=>{Object(re.a)(void 0===e||"object"==typeof e,"Invalid config type given");e&&Object.values(e).forEach(e=>{Object(re.a)("object"==typeof e,"All themes in the configuration must be a `Theme` object. Found %s",typeof e)})},ce=Object(_.memo)(({themeConfig:e,use:t,children:s})=>{oe(e);e=Object.assign({},ae.b,e);const n=t?e[t]:e[W.b]||Object(ie.a)();return Object(I.jsx)(J.a.Provider,{value:n,children:s})});ce.displayName="ThemeProvider";ce.propTypes={children:r.a.node.isRequired,themeConfig:r.a.object,use:ne};var le=ce;const de=o.a.div.withConfig({displayName:"PrimaryMessageAvatar__PrimaryMessageAvatarWrapper",componentId:"zq8fhg-0"})(["align-items:center;display:flex;flex-shrink:0;justify-items:center;margin-top:35px;"]);class ue extends _.PureComponent{render(){const{children:e,className:t}=this.props;return Object(I.jsx)(de,{"data-test-id":"primary-message-avatar",className:t,children:e})}}ue.displayName="PrimaryMessageAvatar";ue.propTypes={children:r.a.node.isRequired,className:r.a.string};const pe=o.a.div.withConfig({displayName:"PrimaryMessageContentSection__PaddedArea",componentId:"sc-1aluvw9-0"})(["padding:8px 16px;"]),he=o.a.div.withConfig({displayName:"PrimaryMessageContentSection__PrimaryMessageContentSectionWrapper",componentId:"sc-1aluvw9-1"})(["overflow:hidden;width:100%;button{width:auto;}"]);class me extends _.PureComponent{renderContent(){const{children:e}=this.props;return Object(I.jsx)(pe,{children:e})}render(){const{children:e,className:t}=this.props;return _.Children.count(e)>0?Object(I.jsx)(he,{"data-test-id":"primary-message-content-section",className:t,children:Object(I.jsx)("div",{className:"width-100 padding-x-4 padding-y-2",children:this.renderContent()})}):null}}me.contextType=J.a;me.displayName="PrimaryMessageContentSection";me.propTypes={children:r.a.node,className:r.a.string};var be=s("8Ma8");const ge=o.a.div.withConfig({displayName:"PrimaryMessageContent__PrimaryMessageContentWrapper",componentId:"giazyi-0"})(["position:relative;min-height:32px;word-break:break-word;box-sizing:border-box;border-style:solid;border-width:",";border-color:",";background-color:",";color:",";display:inline-flex;align-items:center;flex-direction:column;border-radius:",";","{border-top-style:solid;border-top-width:1px;border-top-color:",";&:first-child{border-top:none;}}max-width:284px;"],({borderWidth:e})=>e,({borderColor:e})=>e,({backgroundColor:e})=>e,({textColor:e})=>e,({borderRadius:e})=>e,he,({borderColor:e})=>e),je=e=>{const{children:t,className:s,shouldFocusMessage:n}=e,a=Object(J.b)(),{backgroundColor:r,borderColor:i,borderRadius:o,borderWidth:c,textColor:l}=a,d=Object(_.useRef)(null),{disableAutoFocus:u}=Object(be.c)();Object(_.useEffect)(()=>{!u&&n&&d.current&&d.current.focus()},[u,n]);return Object(I.jsx)(ge,{className:s,backgroundColor:r,borderColor:i,borderRadius:o,borderWidth:c,tabIndex:0,ref:d,textColor:l,"data-test-id":"primary-message-content-wrapper",children:t})};je.displayName="PrimaryMessageContent";je.propTypes={children:r.a.node,className:r.a.string,shouldFocusMessage:r.a.bool};var fe=je;const Oe=o.a.div.withConfig({displayName:"PrimaryMessageFooter__PrimaryMessageFooterWrapper",componentId:"sc-12ulmmk-0"})(["display:flex;margin-top:4px;max-width:284px;"]);class xe extends _.PureComponent{render(){const{children:e,className:t}=this.props;return Object(I.jsx)(Oe,{"data-test-id":"primary-message-footer",className:t,children:e})}}xe.displayName="PrimaryMessageFooter";xe.propTypes={children:r.a.node.isRequired,className:r.a.string};const ye=o.a.div.withConfig({displayName:"PrimaryMessageHeader__PrimaryMessageHeaderWrapper",componentId:"sc-5wctw0-0"})(["display:flex;height:16px;align-items:center;margin-top:4px;margin-bottom:4px;width:100%;"]);class ve extends _.PureComponent{render(){const{children:e,className:t}=this.props;return Object(I.jsx)(ye,{className:t,"data-test-id":"primary-message-header-wrapper",children:e})}}ve.displayName="PrimaryMessageHeader";ve.propTypes={children:r.a.node.isRequired,className:r.a.string};const Ce=o.a.div.withConfig({displayName:"PrimaryMessageHeaderContent__PrimaryMessageHeaderContentWrapper",componentId:"sc-3ivlc2-0"})(["margin-left:1px;min-width:0;"]);class Te extends _.PureComponent{render(){const{children:e,className:t}=this.props;return Object(I.jsx)(Ce,{className:t,"data-test-id":"primary-message-header-content-wrapper",children:e})}}Te.displayName="PrimaryMessageHeaderContent";Te.propTypes={children:r.a.node.isRequired,className:r.a.string};const we="8px",Ie=o.a.div.withConfig({displayName:"PrimaryMessage__PrimaryMessageWrapper",componentId:"yibb9u-0"})(["display:flex;flex-direction:column;align-items:",";padding-left:",";","{","{width:",";margin-left:-",";margin-right:",";}>:first-child{&","{margin-left:",";}}}","{margin-left:",";}","{margin-left:",";}"],({alignment:e})=>e||"flex-start",we,ye,de,({avatarWidth:e})=>e,we,we,Ce,({avatarWidth:e})=>e,ge,({avatarWidth:e})=>e,Oe,({avatarWidth:e})=>e),Se=o.a.div.withConfig({displayName:"PrimaryMessage__SpacingWrapper",componentId:"yibb9u-1"})(["padding-top:4px;padding-bottom:4px;padding-left:10px;padding-right:10px;width:100%;"]);class ke extends _.PureComponent{render(){const{children:e,className:t,use:s}=this.props;return e?Object(I.jsx)(le,{themeConfig:this.context,use:s,children:Object(I.jsx)(Se,{className:t,children:Object(I.jsx)(J.a.Consumer,{children:({alignItems:t,avatarWidth:n})=>Object(I.jsx)(Ie,{"data-test-id":this.props["data-test-id"],"data-test-use":s,alignment:t,avatarWidth:n,children:e})})})}):null}}ke.displayName="PrimaryMessage";ke.propTypes={children:r.a.node,className:r.a.string,"data-test-id":r.a.string,use:ne};ke.contextType=ae.a;const Re=["width","height"],Ae=o.a.div.withConfig({displayName:"SkeletonText__SkeletonTextWrapper",componentId:"lyu1nf-0"})(["position:relative;width:",";height:",";max-height:24px;"],({width:e})=>l(e),({height:e})=>l(e)),Ne=o()(N).withConfig({displayName:"SkeletonText__SkeletonTextInner",componentId:"lyu1nf-1"})(["height:0.75em;left:0;position:absolute;top:50%;transform:translateY(-50%);width:100%;"]),Pe=e=>{let{width:t="100%",height:s="auto"}=e,n=Object(d.a)(e,Re);return Object(I.jsxs)(Ae,{width:t,height:s,children:["Â ",Object(I.jsx)(Ne,Object.assign({},n))]})};Pe.displayName="SkeletonText";Pe.propTypes={height:r.a.oneOfType([r.a.number,r.a.string]),width:r.a.oneOfType([r.a.number,r.a.string])};var Ee=Pe,Me=s("Mcxo"),_e=s("dPcB"),Fe=s("Rd7q");const Le=["de","ja"];var qe=({givenName:e,familyName:t,email:s},n)=>{const a=n&&n.locale||Object(Fe.a)();return Le.indexOf(a)>=0||!e?Object(_e.a)({firstName:e,lastName:t,email:s},n):e},Be=s("0FzD");class He extends _.Component{render(){const{email:e,familyName:t,givenName:s,isFriendly:n,name:a,options:r,titleType:i}=this.props,o=n?qe({givenName:s,familyName:t,email:e},r):Object(_e.a)({firstName:s,lastName:t,email:e,name:a,titleType:i},r);return Object(I.jsx)("span",{children:o})}}He.displayName="FormattedName";He.propTypes={email:r.a.string,familyName:r.a.string,givenName:r.a.string,isFriendly:r.a.bool,name:r.a.string,options:r.a.object,titleType:r.a.oneOf(Object.keys(Be.a).map(e=>Be.a[e]))};He.defaultProps={isFriendly:!1};var ze=s("sl/w");const De=({sender:e})=>{switch(e&&Object(q.h)(e)){case D.BOT:return Object(I.jsx)(ze.a,{message:"conversations-message-history.responder.bot"});case D.AGENT:return Object(I.jsx)(ze.a,{message:"conversations-message-history.responder.unknownResponder"});case D.VISITOR:return Object(I.jsx)(ze.a,{message:"conversations-message-history.responder.unknownVisitor"});case D.SYSTEM:return Object(I.jsx)(ze.a,{message:"conversations-message-history.responder.automatic"});default:return Object(I.jsx)(ze.a,{message:"conversations-message-history.responder.unknownSender"})}};De.displayName="UnknownSenderText";const Ve=({sender:e,isLoading:t})=>{if(t)return Object(I.jsx)(Ee,{"data-test-id":"skeleton-text",width:100});const s=e&&Object(q.e)(e),n=e&&Object(q.g)(e),a=e&&Object(q.d)(e);return Boolean(s||n||a)?Object(I.jsx)(He,{givenName:s||void 0,familyName:n||void 0,email:a||void 0}):Object(I.jsx)(De,{sender:e})};Ve.displayName="SenderName";Ve.propTypes={isLoading:r.a.bool,sender:Object(n.a)("Sender")};var Ue=Ve;class Qe extends _.PureComponent{render(){const{isSenderLoading:e,sender:t}=this.props;return e?Object(I.jsx)(Ee,{width:150}):Object(I.jsx)(Me.a,{use:"help",children:Object(I.jsx)("strong",{children:Object(I.jsx)(Ue,{sender:t})})})}}Qe.displayName="SenderHeaderContent";Qe.propTypes={isSenderLoading:r.a.bool,sender:Object(n.a)("Sender")};var We=Qe;class Ge extends _.PureComponent{render(){const{isSenderLoading:e,sender:t}=this.props;return Object(I.jsx)(We,{sender:t,isSenderLoading:e})}}Ge.displayName="TypingHeaderContent";Ge.propTypes={isSenderLoading:r.a.bool,sender:Object(n.a)("Sender")};var Ye=s("FYyX"),Ke=s("rCfO"),Je=s("Nnwm");const Xe=Object(Ke.default)((e,t,s)=>t?s.get(Object(Je.buildSenderLocator)(t,e)):null);var $e=s("oLsC"),Ze=s("o/5C"),et=s("/OK6");const tt=e=>Object(et.isFromAgent)(e)?V.a.text("conversations-visitor-message-history.agent"):Object(et.isFromBot)(e)?V.a.text("conversations-visitor-message-history.bot"):Object(et.isFromSystem)(e)?V.a.text("conversations-visitor-message-history.system"):"",st=(e,t)=>{const s=Object(L.getSenderId)(e),n=Object(L.getSenderType)(e),a=Xe(s,n,t);return Object(q.b)(a)||Object($e.a)({senderType:n,firstName:Object(Ze.c)(e)||tt(e),email:Object(Ze.b)(e)||null})},nt="STARTED",at=Object(Ke.default)(e=>!Object(q.b)(e)&&Object(q.i)(e)===nt),rt=e=>{const{message:t,senders:s}=e,n=st(t,s),a=at(n),r=Object(q.e)(n),i=Object(et.isFromVisitor)(t),o=i?W.c:W.a;Object(_.useEffect)(()=>{i||Object(Ye.a)(V.a.text("conversations-visitor-message-history.subjectIsTyping",{subject:r||V.a.text("conversations-visitor-message-history.agent")}))},[i,r]);return Object(I.jsxs)(ke,{use:o,children:[Object(I.jsxs)(ve,{children:[Object(I.jsx)(ue,{children:Object(I.jsx)(Q,{sender:n,isLoading:a})}),Object(I.jsx)(Te,{children:Object(I.jsx)(Ge,{message:t,sender:n,isSenderLoading:a})})]}),Object(I.jsx)(fe,{children:Object(I.jsx)(me,{children:Object(I.jsx)(se,{})})})]})};rt.displayName="TypingIndicatorMessage";rt.propTypes={message:Object(n.a)("TypingIndicatorMessage").isRequired,senders:G.a.isRequired};var it=rt,ot=s("t6nY"),ct=s.n(ot);const lt=o.a.div.withConfig({displayName:"DashedLabel__StyledBorder",componentId:"sc-116x6uh-0"})(["display:flex;flex-grow:1;border:solid 1px ",";"],g.i);function dt({children:e,transparent:t,"data-test-id":s,labelPadding:n}){return Object(I.jsxs)("div",{className:ct()("display-flex align-end",n,t&&"justify-center",!n&&"m-y-6"),"data-test-id":s||"dashed-label",tabIndex:0,children:[!t&&Object(I.jsx)(lt,{"data-test-id":"styled-border",className:"m-bottom-3"}),Object(I.jsx)("div",{className:"max-100 p-x-4",children:Object(I.jsx)(Me.a,{use:"help",className:"m-bottom-1 align-center text-center word-break-break-word flex-column",children:e})}),!t&&Object(I.jsx)(lt,{"data-test-id":"styled-border",className:"m-bottom-3"})]})}dt.displayName="DashedLabel";dt.propTypes={children:r.a.node.isRequired,"data-test-id":r.a.string,transparent:r.a.bool};var ut=dt,pt=s("sA91"),ht=s("Pz4q"),mt=s("rIrL"),bt=s("MfaD");const gt=document.implementation.createHTMLDocument(""),jt=(e,t)=>"p"===t&&e&&e.classList&&e.classList.contains("MsoNormal")&&e.children&&e.children.length,ft=e=>e&&!e.children.legnth&&"o:p"===e.tagName.toLowerCase()&&e.innerHTML.includes("&nbsp;"),Ot=e=>e&&"span"===e.tagName.toLowerCase()&&ft(e.firstElementChild),xt=e=>!!e.getElementsByTagName("img").length,yt=({node:e,node_name:t})=>{if(jt(e,t)){const t=e.firstElementChild;if(ft(t)||Ot(t)){if(xt(e)){e.removeChild(t);return yt({node:e,node_name:"p"})}return{node:gt.createElement("br")}}const s=gt.createElement("div");Object.keys(e.attributes).forEach(t=>{const n=e.attributes[t];s.setAttribute(n.nodeName,n.nodeValue)});s.innerHTML=e.innerHTML.trim().replace(/&nbsp;/g,"");return{node:s}}return null},vt=["position","top","bottom","left","right","z-index","clear","float","background-image","white-space"],Ct=({node:e})=>{if(e&&e.style&&e.style.length>0&&e.style.removeProperty){vt.forEach(t=>e.style.removeProperty(t));return{node:e}}return null},Tt=({node:e,node_name:t})=>{if(e&&"img"===t&&e.attributes){e.attributes["data-original-height"]&&e.setAttribute("height",e.attributes["data-original-height"].value);e.attributes["data-original-width"]&&e.setAttribute("width",e.attributes["data-original-width"].value);e.attributes["data-full-size-src"]&&e.setAttribute("src",e.attributes["data-full-size-src"].value);return{node:e}}return null},wt=({node:e,node_name:t})=>{if("div"===t&&e&&e.classList&&e.classList.contains("gmail_default")){const t=gt.createElement("span");Object.keys(e.attributes).forEach(s=>{const n=e.attributes[s];t.setAttribute(n.nodeName,n.nodeValue)});t.innerHTML=e.innerHTML.trim();return{node:t}}return null};var It=s("YibP"),St=s("eCQl"),kt=s("kkqp"),Rt=s.n(kt);const At=e=>new Rt.a(e),Nt=["gmail_extra","gmail_quote","hs_reply","x_hs_reply_wrap"],Pt="divRplyFwdMsg",Et=(e,t)=>t===Pt||e&&e.contains&&Nt.some(t=>e.contains(t)),Mt=["hs_signature"],_t=e=>e&&e.contains&&Mt.some(t=>e.contains(t)),Ft={transformers:[yt,({node:e})=>{const{classList:t,id:s,attributes:n=[]}=e;if(Et(t,s)){const e=gt.createElement("span");Object.keys(n).forEach(t=>{const s=n[t];e.setAttribute(s.nodeName,s.nodeValue)});e.innerHTML="";e.setAttribute("data-email-reply","");return{node:e}}return null},({node:e})=>{const{classList:t,attributes:s=[]}=e;if(_t(t)){const e=gt.createElement("span");Object.keys(s).forEach(t=>{const n=s[t];e.setAttribute(n.nodeName,n.nodeValue)});e.innerHTML="";e.setAttribute("data-email-signature","");return{node:e}}return null},Ct,wt,Tt],dom:gt,elements:["b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span","a"],attributes:{__ALL__:["style","align","valign","width","height"],blockquote:["cite"],col:["span"],colgroup:["span"],figure:["style"],ol:["start","type"],q:["cite"],img:["title","alt","src"],table:["summary","bgcolor"],td:["abbr","axis","colspan","rowspan","bgcolor"],th:["abbr","axis","colspan","rowspan","scope","bgcolor"],ul:["type"],font:["size"],a:["href","title"],span:["data-at-mention","data-owner-id","contenteditable","data-email-reply"]},add_attributes:{a:{target:"_blank"}},remove_contents:["script"],protocols:{a:{href:["http","https"]}}},Lt=e=>{Array.from(e.querySelectorAll("br + [data-email-reply]")).forEach(e=>{const t=e.previousElementSibling;t&&t.nodeName&&"br"===t.nodeName.toLowerCase()&&t.classList&&t.classList.add("display-none")})},{body:qt}=gt,Bt=Object(Ke.default)((e,t)=>{const s=gt.createElement("div");try{qt.innerHTML=e;const n=Object.assign({},Ft);n.transformers=t;const a=At(n).clean_node(qt).cloneNode(!0);s.appendChild(a);Lt(s)}catch(e){const t=Object(It.a)("Error sanitizing email message: "+e.message,e);Object(St.reportError)({error:t})}return s.innerHTML}),Ht=Object(Ke.default)(e=>Bt(e,[yt,wt,Ct,Tt])),zt=Object(Ke.default)(e=>{if(!e)return null;const t=document.createElement("div");t.innerHTML=Ht(e);document.body.appendChild(t);const s=t.innerText;document.body.removeChild(t);return s.trim()});var Dt=s("qkre"),Vt=s("jbWx");const Ut=[ht.a,mt.a,bt.a,Vt.a],Qt=Object(Ke.default)(e=>{setTimeout(()=>{Object(re.a)(Ut.some(t=>e instanceof t),"hasTextContent: Unsupported message record type %s supplied",Object(pt.a)(e))},0);const t=Object(Dt.f)(e),s=Object(L.getRichText)(e)||Object(L.getPlainText)(e);return t||Boolean(s&&s.length&&zt(s))});var Wt=s("HtM0"),Gt=s("mIAK");let Yt=0;const Kt=e=>{const t=document.createElement("div");t.innerHTML=e.outerHTML;t.children[0].innerHTML="::--::";const[s,n]=t.innerHTML.split("::--::");return{openTag:s,closeTag:n}},Jt=e=>Object.assign({node:e,nodeId:Yt++},e.nodeType===Node.ELEMENT_NODE?Kt(e):{},{children:Array.from(e.childNodes).map(e=>Jt(e))}),Xt=e=>{var t;return(null===(t=e.textContent)||void 0===t?void 0:t.length)||0},$t=((e,t)=>{const s={};return(...n)=>{const a=t(...n);s[a]||(s[a]=e(...n));return s[a]}})((e,t)=>{const s=e.children;let n=0,a="";for(const e of s){var r;if(e.node.nodeType===Node.ELEMENT_NODE){const{html:s,used:r}=$t(e,t-n);a+=s;n+=r}else if(e.node.nodeType===Node.TEXT_NODE&&null!==(r=e.node.textContent)&&void 0!==r&&r.length){const s=e.node.textContent.substring(0,t-n);a+=s;n+=s.length}if(n>=t)break}return{html:(e.openTag||"")+a+(e.closeTag||""),used:n}},(e,t)=>`${e.nodeId}-${t}`),Zt=(e,t)=>{const[s,n]=Object(_.useState)(e.length),[a,r]=Object(_.useState)(!1),[i,o]=Object(_.useMemo)(()=>{const e=document.createElement("div");e.innerHTML=t;return[Jt(e),Xt(e)]},[t]),c=Object(_.useMemo)(()=>$t(i,s).html,[i,s]);Object(_.useEffect)(()=>{if(s<o){r(!1);const e=setTimeout(()=>{n(e=>e+1)},5+Math.min(50*-Math.log(1-Math.random()),100));return()=>{clearTimeout(e)}}r(!0)},[s,o]);return[c,a]};var es=s("yH0d");const ts=o.a.div.withConfig({displayName:"ContentText__ContentTextWrapper",componentId:"j29io0-0"})(["word-wrap:break-word;box-sizing:border-box;width:100%;a{font-weight:inherit;text-decoration:underline;}img{max-width:100%;height:auto;}"]),ss=e=>{if(e.nodeType===Node.TEXT_NODE)return e;for(let t=e.childNodes.length-1;t>=0;t--){const s=ss(e.childNodes[t]);if(s)return s}return null},ns=e=>{const{"aria-label":t,contentText:s,isPartialMessage:n,messageId:a,onClickAction:r=(()=>{}),shouldAnnounce:i}=e,o=Object(_.useRef)(null),c=Object(_.useMemo)(()=>{const e=document.createElement("span");e.classList.add("cursor");return e},[]),{announce:l}=Object(Gt.b)(),d=n?"":s,[u,p]=Zt(d,s),h=n||!p;Object(_.useEffect)(()=>{i&&l({id:a||t,text:t})},[l,t,a,i]);Object(_.useEffect)(()=>{if(h&&o.current){var e;null===(e=ss(o.current))||void 0===e||null===(e=e.parentElement)||void 0===e||e.appendChild(c)}else c.remove()},[u,c,h]);return Object(I.jsx)(ts,{children:Object(I.jsx)("div",{ref:o,"aria-label":t,dir:"auto","data-test-id":"primary-message-content",dangerouslySetInnerHTML:{__html:Object(Wt.a)(u,{shouldPreserveNewlines:!0,shouldOpenLinksInNewTab:Object(es.a)(),allowedDomainsForIframe:[/^\/?\/?play\.vidyard\.com\/[a-zA-Z0-9]*\.html$/gm]})},onClick:r})})};ns.displayName="ContentText";ns.propTypes={"aria-label":r.a.string,contentText:r.a.string.isRequired,messageId:r.a.string,onClickAction:r.a.func,shouldAnnounce:r.a.bool};var as=ns,rs=s("MJM1");const is=e=>Object(rs.a)(["metadata","officeHoursStartTime"],e),os=e=>Object(rs.a)(["officeHoursStartTime"],e);var cs=s("V1/C");const ls=e=>e["@type"]===cs.a?os(e)&&os(e)-(new Date).getTime()<0:is(e)&&is(e)-(new Date).getTime()<0,ds=({message:e})=>e["@type"]===cs.a||Qt(e)?ls(e)?null:Object(I.jsx)(ut,{transparent:!0,labelPadding:"m-y-1",children:Object(I.jsx)(as,{messageId:e.id,"aria-label":`${V.a.text("conversations-visitor-message-history.systemMessage")} ${Object(L.getPlainText)(e)}`,contentText:Object(L.getRichText)(e)||Object(L.getPlainText)(e)})}):null;ds.displayName="AvailabilityMessage";ds.propTypes={message:r.a.oneOfType([Object(n.a)("TypicalResponseTimeMessage"),Object(n.a)("OfficeHoursMessage")]).isRequired};var us=ds,ps=s("vIAU"),hs=s("mNDY"),ms=s("wL7V"),bs=s("oxA8"),gs=s("QYOI");const js=()=>Object(I.jsx)("i",{children:Object(I.jsx)(ze.a,{message:"conversations-message-history.noContent"})});js.displayName="NoContentLabel";var fs=js,Os=s("r1tY");const xs=["fileId"],ys=["fileMetadata"],vs=["fileUsageType"],Cs=["thumbnailMetadata"],Ts=(Object(rs.a)(xs),Object(rs.a)(ys)),ws=(Object(rs.a)(vs),Object(rs.a)(Cs),["expiresAt"]),Is=["url"],Ss=["name"],ks=["extension"],Rs=["type"],As=["fileSize"],Ns=["width"],Ps=["height"],Es=(Object(rs.a)(ws),Object(rs.a)(Is)),Ms=Object(rs.a)(Ss),_s=Object(rs.a)(ks),Fs=Object(rs.a)(Rs),Ls=Object(rs.a)(As),qs=Object(rs.a)(Ns),Bs=Object(rs.a)(Ps),Hs=e=>{const t=Ms(e),s=_s(e);return s?`${t}.${s}`:t};var zs=s("g/uM"),Ds=s("PY2H");const Vs=o.a.div.withConfig({displayName:"InlineImageAttachment__InlineImageAttachmentWrapper",componentId:"p4t37b-0"})(["display:block;max-width:100%;"]),Us=({maxWidth:e,width:t,height:s,hasLoaded:n})=>{if(n||!e||!t||!s)return{};if(t<=e)return{width:t,height:s};return{width:e,height:s*(e/t)}};class Qs extends _.PureComponent{constructor(e){super(e);this.hasLoadedImage=()=>{this.setState({hasLoaded:!0})};this.state={hasLoaded:!1}}render(){const{name:e,url:t}=this.props,{width:s,height:n}=Us(Object.assign({},this.props,this.state));return Object(I.jsx)(Vs,{children:Object(I.jsx)(Ds.a,{href:t,target:"_blank","data-test-id":"inline-image-attachment",children:Object(I.jsx)(zs.a,{alt:e,src:t,width:s,height:n,style:{minHeight:n},onLoad:this.hasLoadedImage})})})}}Qs.displayName="InlineImageAttachment";Qs.propTypes={height:r.a.number,maxWidth:r.a.number,name:r.a.string.isRequired,url:r.a.string.isRequired,width:r.a.number};var Ws=Qs;const Gs="IMG",Ys=e=>{const t=Ts(e);return{type:Fs(t),extension:_s(t)}},Ks=e=>e?e.filter(e=>{const{type:t,extension:s}=Ys(e);return Boolean(t===Gs&&"svg"!==s)}):Object(gs.List)(),Js=e=>e.filter(e=>{const{type:t,extension:s}=Ys(e);return Boolean(t!==Gs||"svg"===s)}),Xs=e=>e.some(e=>{const{type:t,extension:s}=Ys(e);return Boolean(t===Gs&&"svg"!==s)}),$s=300,Zs=o.a.div.withConfig({displayName:"InlineImageAttachments__FileAttachmentsWrapper",componentId:"sc-14wke5u-0"})(["cursor:pointer;box-sizing:border-box;width:100%;max-width:","px;display:block;margin-bottom:16px;margin-top:8px;"],$s);class en extends _.PureComponent{constructor(e){super(e);this.state={maxWidth:$s};this.wrapperRef=Object(_.createRef)()}componentDidMount(){const e=Object(Os.findDOMNode)(this.wrapperRef.current);e&&e.offsetWidth&&e.offsetWidth!==this.state.maxWidth&&this.setState({maxWidth:e.offsetWidth})}render(){const{fileAttachments:e}=this.props;return Object(I.jsx)(Zs,{"data-test-id":"file-attachments-wrapper",ref:this.wrapperRef,children:Ks(e).map((e,t)=>{const s=Ts(e),n=Hs(s),a=Es(s),r=qs(s),i=Bs(s);return Object(I.jsx)(Ws,{name:n,url:a,width:r,height:i,maxWidth:this.state.maxWidth},"image-"+t)})})}}en.displayName="InlineImageAttachments";en.propTypes={fileAttachments:r.a.instanceOf(gs.List)};var tn=en,sn=s("C3IS"),nn=s("OI0Z"),an=s("rF4n"),rn=s("P7jJ");const on=e=>Object(I.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(I.jsx)("defs",{children:Object(I.jsx)("path",{d:"M14.466 0c.076 0 .153.008.233.023.1.02.196.059.288.104.023.011.046.023.068.037.09.052.177.111.252.187l6.345 6.4c.075.076.135.163.186.255.013.023.025.045.036.068.045.093.083.19.103.295.015.075.023.153.023.231v13.2c0 1.884-1.468 3.2-3.569 3.2H6.534c-2.1 0-3.568-1.316-3.568-3.2V3.6c0-1.985 1.6-3.6 3.568-3.6zm-1.133 2H6.25C5.56 2 5 2.56 5 3.25v17.917c0 .689.68.833 1.25.833h12.5c.57 0 1.25-.144 1.25-.833v-12.5h-4.583c-1.149 0-2.084-.935-2.084-2.084V2z",id:"file__a"})}),Object(I.jsx)("use",{xlinkHref:"#file__a"})]}));on.displayName="SVGFile";var cn=on;const ln=o.a.div.withConfig({displayName:"FileAttachmentTile__FileAttachmentTileWrapper",componentId:"sc-15rid2k-0"})(["max-width:300px;"]);class dn extends _.PureComponent{render(){const{fileMetadata:e}=this.props,t=Hs(e),s=Es(e),n=Ls(e);return Object(I.jsx)(ln,{"data-test-id":"file-attachment-tile",children:Object(I.jsx)(an.default,{onClick:()=>window.open(s),fileName:t,fileInfo:Object(I.jsx)(nn.a,{value:n}),preview:Object(I.jsx)(rn.a,{icon:Object(I.jsx)(cn,{}),size:"sm"})})})}}dn.displayName="FileAttachmentTile";dn.propTypes={fileMetadata:Object(n.a)("FileMetadataRecord").isRequired};dn.contextType=J.a;var un=dn;const pn=o.a.div.withConfig({displayName:"AttachmentsFooter__AttachmentsFooterWrapper",componentId:"sc-1jaqq2t-0"})(["cursor:pointer;box-sizing:border-box;display:block;background-color:",";"],({backgroundColor:e})=>e),hn=o()(un).withConfig({displayName:"AttachmentsFooter__StyledFileAttachmentTile",componentId:"sc-1jaqq2t-1"})(["background-color:",";"],({backgroundColor:e})=>e||"rgba(255, 255, 255, 0.5)");class mn extends _.PureComponent{render(){const{fileAttachments:e}=this.props,{fileAttachmentTheme:{tileBackgroundColor:t},backgroundColor:s}=this.context;return Object(I.jsx)(pn,{"data-test-id":"attachments-footer",backgroundColor:s,children:e.map((e,s)=>Object(I.jsx)(hn,{fileMetadata:Ts(e),backgroundColor:t},s))})}}mn.displayName="AttachmentsFooter";mn.propTypes={fileAttachments:r.a.instanceOf(gs.List).isRequired};mn.contextType=J.a;var bn=mn;const gn=/^rgb/i,jn=e=>{let t,s,n;try{if(gn.test(e)){const a=e.match(/(\d+)\D+(\d+)\D+(\d+)/)||[];t=parseInt(a[1],10);s=parseInt(a[2],10);n=parseInt(a[3],10)}else{let a=e.toLowerCase().replace(/^#/,"");3===a.length&&(a=a.replace(/([0-9a-f])/g,"$1$1"));t=parseInt(a.substring(0,2),16);s=parseInt(a.substring(2,4),16);n=parseInt(a.substring(4,6),16)}if([t,s,n].some(isNaN))return{}}catch(e){return{}}return{r:t,g:s,b:n}},fn=e=>{const{r:t,g:s,b:n}=jn(e);if([t,s,n].some(e=>Number.isNaN(Number(e))))return{hue:0,saturation:0,lightness:0};const a=t/255,r=s/255,i=n/255,o=Math.max(a,r,i),c=Math.min(a,r,i),l=(o+c)/2,d=o-c;if(0===d)return{hue:0,saturation:0,lightness:l};let u;const p=l>.5?d/(2-o-c):d/(o+c);switch(o){case a:u=(r-i)/d+(r<i?6:0);break;case r:u=(i-a)/d+2;break;default:u=(a-r)/d+4}u*=60;u=Math.round(u);return{hue:u,saturation:p,lightness:l}},On=e=>{const t=e<0?0:e>1?1:e;return Math.round(100*t)+"%"},xn=(e,t=.1)=>{const{hue:s,saturation:n,lightness:a}=fn(e);return`hsl(${[s,On(n),On(a+t)].join(", ")})`},yn=(e,t=.1)=>xn(e,-t);var vn=s("OwpT"),Cn=s.n(vn),Tn=s("JGJA"),wn=s("ibex");const In=o.a.div.withConfig({displayName:"CommonMessageContent__HyperlinkStyleWrapper",componentId:"sc-1l5886n-0"})(["overflow:hidden;"," a{color:",";&:hover{color:",";}&:active{color:",";}}"],ge,({hyperlinkColor:e})=>e,({hyperlinkColor:e})=>e&&yn(e),({hyperlinkColor:e})=>e&&yn(e,.2));class Sn extends _.PureComponent{isSentFromVisitor(){return Object(L.getSenderType)(this.props.message)===D.VISITOR}isClickableLink(e){return new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(e)}handleOnClickEvent(e){e.persist();e.target instanceof HTMLElement&&"A"===e.target.tagName&&this.props.toggleOpen({isOpened:!1,isUser:!0})}renderContentText(){const{message:e,mobile:t,isLastMessage:s,senderName:n}=this.props,a=Object(L.getRichText)(e)||Object(L.getPlainText)(e),r=t&&this.isClickableLink(a);if(!a)return null;const i=Object(L.getRichText)(e)&&Cn.a.link(a,{stripPrefix:!1});return Object(I.jsx)(as,{messageId:e.id,contentText:i||a,shouldAnnounce:s,isPartialMessage:Object(wn.isPartialMessage)(e),"aria-label":`${this.isSentFromVisitor()?V.a.text("conversations-visitor-message-history.iSay"):V.a.text("conversations-visitor-message-history.subjectSays",{subject:n||V.a.text("conversations-visitor-message-history.agent")})} ${Object(L.getPlainText)(e)}`,onClickAction:r?this.handleOnClickEvent.bind(this):()=>{}})}renderMessageSection(){const{fileAttachments:e,message:t}=this.props,s=Object(Tn.a)("hiddenBy",t),n=!Object(sn.c)(t)&&e&&Xs(e),a=Qt(t);return s?Object(I.jsx)(me,{children:Object(I.jsx)("i",{children:Object(I.jsx)(ze.a,{message:"conversations-visitor-message-history.common-message.hiddenMessage"})})}):n||a?Object(I.jsxs)(me,{children:[this.renderContentText(),n&&Object(I.jsx)(tn,{fileAttachments:e}),this.props.quickReplySelect&&"function"==typeof this.props.quickReplySelect&&this.props.quickReplySelect()]}):null}renderAttachmentsSection(){const{fileAttachments:e,message:t}=this.props,s=Object(sn.c)(t)?e:Js(e);return s&&s.size?Object(I.jsx)(me,{children:Object(I.jsx)(bn,{fileAttachments:s})}):null}render(){const{textColor:e}=this.context,t=this.renderMessageSection(),s=this.renderAttachmentsSection(),n=this.isSentFromVisitor(),{hasUnansweredQuickReplyMessage:a,isLastMessage:r}=this.props;return Object(I.jsx)(In,{hyperlinkColor:n?e:"inherit",children:Object(I.jsxs)(fe,{shouldFocusMessage:r&&a,children:[t,s,!t&&!s&&Object(I.jsx)(me,{children:Object(I.jsx)(fs,{})})]})})}}Sn.displayName="CommonMessageContent";Sn.propTypes={fileAttachments:r.a.instanceOf(gs.List),hasUnansweredQuickReplyMessage:r.a.bool,isLastMessage:r.a.bool,message:r.a.oneOfType([Object(n.a)("CommonMessage"),Object(n.a)("PartialMessage")]).isRequired,mobile:r.a.bool,quickReplySelect:r.a.oneOfType([r.a.bool,r.a.func]),senderName:r.a.string,toggleOpen:r.a.func};Sn.contextType=J.a;var kn=Sn;class Rn extends _.PureComponent{render(){const{fileAttachments:e,message:t,positionDescriptors:s}=this.props,n=Object(ms.a)(t),a=s.includes(ps.c);return Object(I.jsxs)(ke,{use:W.c,"data-test-id":"primary-message",children:[Object(I.jsx)(kn,{fileAttachments:e,isLastMessage:a,message:n}),a&&Object(I.jsx)(xe,{children:Object(I.jsx)(Me.a,{use:"help",children:Object(I.jsx)(bs.a,{message:"conversations-visitor-message-history.status.publishing.UNPUBLISHED"})})})]})}}Rn.displayName="ActivelyPublishingMessage";Rn.propTypes={fileAttachments:r.a.instanceOf(gs.List),message:Object(n.a)("ActivelyPublishing").isRequired,positionDescriptors:hs.a.isRequired};var An=Rn,Nn=s("yYAF"),Pn=s("BvOu");const En=(e,t)=>{Object(_.useEffect)(()=>{const s=s=>{try{const{data:n,source:a}=s,r=JSON.parse(n);if(r.uuid!==e||!e||!r.uuid)return;const{type:i,data:o}=r,c=t[i];"function"==typeof c&&c({data:o,source:a})}catch(e){return}};window.addEventListener("message",s);return()=>window.removeEventListener("message",s)},[])},Mn=window.location.host.includes("local"),_n=Object(_.memo)(({message:e,sessionId:t,hubspotUtk:s,threadId:n})=>{const a=Object(_.useRef)(Object(Pn.generateUuid)()),[r,i]=Object(_.useState)(160),o={RESIZE_IFRAME:({data:e})=>{i(e.height)}};En(a.current,o);const c=new URLSearchParams({uuid:a.current,sessionId:t,hubspotUtk:s,threadId:n}),l=`${Object(Nn.getFullUrl)(Mn?"local":"app")}/feedback-in-chat/${Object(Tn.a)("feedbackTransactionId",e)}?${c}`;return Object(I.jsx)(ke,{use:W.a,children:Object(I.jsx)(fe,{children:Object(I.jsx)(me,{children:Object(I.jsx)("iframe",{src:l,style:{width:"100%",height:r,border:0}})})})})});_n.displayName="FeedbackSurveyMessage";_n.propTypes={hubspotUtk:r.a.string,message:Object(n.a)("FeedbackSurveyMessage").isRequired,sessionId:r.a.string,threadId:r.a.string};var Fn=_n,Ln=s("LdnN"),qn=s("QGYt"),Bn=s("4cgu"),Hn=s("Xs/R"),zn=s("f3U3");const Dn=o()(qn.a).withConfig({displayName:"EmailCaptureInput__StyledVizExButton",componentId:"sc-18yyuxq-0"})(["padding:0;width:100% !important;height:100%;"]),Vn=o.a.div.withConfig({displayName:"EmailCaptureInput__LoadingButtonContainer",componentId:"sc-18yyuxq-1"})(["width:38px;height:32px;margin:4px 4px 4px 0;"]),Un={disabled:r.a.bool,locale:r.a.string,onChange:r.a.func.isRequired,onKeyPress:r.a.func.isRequired,onSubmit:r.a.func,submissionState:r.a.oneOf(["ready","submitting","done"]),value:r.a.string},Qn=({disabled:e,value:t,onChange:s,onKeyPress:n,onSubmit:a,locale:r,submissionState:i})=>Object(I.jsx)(zn.a,{"aria-label":V.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:r}),value:t,placeholder:V.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:r}),"data-test-id":"email-capture-input",onChange:s,onKeyPress:n,suffix:Object(I.jsx)(Vn,{children:Object(I.jsx)(Bn.a,{currentState:i,onClick:a,disabled:e,"aria-label":V.a.text("conversations-visitor-message-history.email-capture.submitEmailAddress",{locale:r}),"data-test-id":"email-capture-submit-button",Button:Dn,children:Object(I.jsx)(rn.a,{icon:Object(I.jsx)(Hn.a,{color:g.r})})})})});Qn.displayName="EmailCaptureInput";Qn.propTypes=Un;var Wn=Qn;const Gn=o.a.span.withConfig({displayName:"CaptureSection__ErrorMessage",componentId:"qqqro0-0"})(["color:",";font-size:12px;line-height:18px;text-align:left;margin-top:9px;display:flex;"],g.e),Yn=({message:e,email:t,errorMessage:s,onChange:n,onKeyPress:a,onSubmit:r,submissionState:i})=>Object(I.jsxs)(me,{children:[Object(I.jsx)(as,{messageId:e.id,"aria-label":`${V.a.text("conversations-visitor-message-history.agentSays")} ${Object(L.getPlainText)(e)}`,contentText:Object(L.getPlainText)(e)}),Object(I.jsx)(Wn,{disabled:!t,value:t,onChange:n,onKeyPress:a,onSubmit:r,submissionState:i}),Object(I.jsx)(Gn,{"aria-live":"assertive",children:s})]},"email-prompt-capture-section");Yn.displayName="CaptureSection";Yn.propTypes={email:r.a.string,errorMessage:r.a.string,message:Object(n.a)("EmailCapturePromptMessage").isRequired,onChange:r.a.func.isRequired,onKeyPress:r.a.func.isRequired,onSubmit:r.a.func.isRequired,submissionState:r.a.string.isRequired};var Kn=s("i7jX");const Jn=o.a.div.withConfig({displayName:"ConsentToCommunicate__BreakString",componentId:"sc-1f2zj5x-0"})(["-ms-word-break:break-all;display:block;word-break:break-word;word-wrap:break-word;"]),Xn=o()(Me.a).withConfig({displayName:"ConsentToCommunicate__SmallNoParagraphPadding",componentId:"sc-1f2zj5x-1"})(["p{margin-bottom:0;}"]),$n=({message:e,companyName:t,consentToCommunicate:s,onChange:n})=>{const a=Object(Wt.a)(e)||V.a.text("conversations-visitor-message-history.email-capture.consentToCommunicate",{accountName:t});return Object(I.jsx)(Kn.a,{checked:s,onChange:n,children:Object(I.jsx)(Xn,{use:"help",children:Object(I.jsx)(Jn,{children:Object(I.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})})})})};$n.displayName="ConsentToCommunicate";$n.propTypes={companyName:r.a.string,consentToCommunicate:r.a.bool.isRequired,message:r.a.string.isRequired,onChange:r.a.func.isRequired};var Zn=$n;const ea=/\s|@.{0,}@/;class ta extends _.PureComponent{constructor(e){super(e);this.onConsentChange=()=>{this.setState({hasConsentedToCommunicate:!this.state.hasConsentedToCommunicate})};this.state={email:"",emailError:!1,hasConsentedToCommunicate:!1,submitFailure:!1,submissionState:"ready"};this.handleChange=this.handleChange.bind(this);this.handleKeyPress=this.handleKeyPress.bind(this);this.handleSubmit=this.handleSubmit.bind(this)}handleChange(e){this.setState({email:e.target.value,emailError:!1,submitFailure:!1,submissionState:"ready"})}handleKeyPress(e){const t=13;e.which===t&&this.handleSubmit()}handleSubmit(){const{sendVisitorEmailAddress:e,threadId:t}=this.props,{email:s,hasConsentedToCommunicate:n}=this.state,a=s.trim();Ln.a.test(a)&&!a.match(ea)?this.setState({submissionState:"submitting"},()=>{e({email:a,consentToCommunicate:n,threadId:t}).then(({error:e}={})=>{this.setState({submitFailure:Boolean(e),submissionState:"done"})}).catch(e=>{setTimeout(()=>{throw e})})}):this.setState({emailError:!0,submissionState:"ready"})}getValidationMessage(){switch(!0){case this.state.emailError:return Object(I.jsx)(bs.a,{message:"conversations-visitor-message-history.email-capture.invalid"});case this.state.submitFailure:return Object(I.jsx)(bs.a,{message:"conversations-visitor-message-history.email-capture.failed"});default:return null}}render(){const{companyName:e,consentToCommunicateMessage:t,hasVisitorEmail:s,message:n,positionDescriptors:a,requiresConsentToCommunicate:r}=this.props,{email:i,hasConsentedToCommunicate:o}=this.state,c=this.getValidationMessage();return Object(I.jsx)(ke,{use:W.a,children:Object(I.jsx)(fe,{shouldFocusMessage:Boolean(a&&a.get(ps.c)),children:s?Object(I.jsx)(me,{children:Object(I.jsx)(bs.a,{"data-test-id":"email-capture-success",message:"conversations-visitor-message-history.email-capture.thanks"})}):Object(I.jsxs)(_.Fragment,{children:[Object(I.jsx)(Yn,{message:n,email:i,errorMessage:c,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onSubmit:this.handleSubmit,submissionState:this.state.submissionState}),r&&Object(I.jsx)(me,{children:Object(I.jsx)(Zn,{message:t,companyName:e,consentToCommunicate:o,onChange:this.onConsentChange})},"email-prompt-content-section")]})})})}}ta.displayName="EmailCapturePromptMessage";ta.propTypes={companyName:r.a.string,consentToCommunicateMessage:r.a.string,hasVisitorEmail:r.a.bool.isRequired,message:Object(n.a)("EmailCapturePromptMessage").isRequired,positionDescriptors:hs.a.isRequired,requiresConsentToCommunicate:r.a.bool,sendVisitorEmailAddress:r.a.func.isRequired,threadId:r.a.number.isRequired};var sa=ta,na=s("19qb"),aa=s("g/i1"),ra=s("le4V"),ia=s("dLEV"),oa=s("ZqFO"),ca=s("49A5");const la=Object(ia.createSelector)(ca.getLatestWidgetData,e=>Object(oa.c)(e)),da=Object(ia.createSelector)(ca.getLatestWidgetData,Object(Tn.a)("companyName"));var ua=s("jngL"),pa=s("AEyM"),ha=s("eEyY");const ma=e=>({coloring:Object(aa.a)(e),companyName:da(e),consentToCommunicateMessage:la(e),hasVisitorEmail:Object(ua.a)(e),requiresConsentToCommunicate:Object(ra.a)(e),threadId:Object(ha.getCurrentThreadId)(e)}),ba={sendVisitorEmailAddress:pa.sendVisitorEmailAddress};var ga=Object(na.connect)(ma,ba)(sa);const ja=e=>Object(I.jsx)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 25",xmlns:"http://www.w3.org/2000/svg"},e,{children:Object(I.jsx)("path",{d:"M12 7.663c-.042-.286.044-.577.234-.796.192-.218.469-.344.76-.344h2.011c.292 0 .57.126.76.344.192.22.277.51.236.796l-1.006 6.992c-.07.492-.494.857-.995.857-.5 0-.925-.365-.995-.857l-1.006-6.992zm2 13.841c-1.11 0-2.01-.894-2.01-1.997 0-1.103.9-1.998 2.01-1.998 1.111 0 2.01.895 2.01 1.998s-.899 1.997-2.01 1.997zm3.001-19.783C16.375.643 15.253 0 14 0s-2.374.643-3 1.72L.47 19.838c-.627 1.078-.627 2.365 0 3.442C1.096 24.357 2.217 25 3.47 25H24.53c1.253 0 2.374-.643 3-1.72.627-1.078.627-2.365 0-3.443L17.001 1.721z",fillRule:"evenodd"})}));ja.displayName="SVGWarning";var fa=ja;class Oa extends _.PureComponent{render(){const{fileAttachments:e,message:t,onRepublish:s}=this.props,n=Object(ms.a)(t);return Object(I.jsxs)(ke,{use:W.c,"data-test-id":"primary-message",children:[Object(I.jsx)(kn,{fileAttachments:e,isLastMessage:!0,message:n}),Object(I.jsx)(xe,{children:Object(I.jsxs)(Me.a,{use:"error",children:[Object(I.jsx)(rn.a,{icon:Object(I.jsx)(fa,{}),className:"m-right-1"}),Object(I.jsx)(Ds.a,{onClick:()=>s(n),use:"error",children:Object(I.jsx)(bs.a,{message:"conversations-visitor-message-history.status.publishing.PUBLISH_FAILED"})})]})})]})}}Oa.displayName="FailedToPublishMessage";Oa.propTypes={fileAttachments:r.a.instanceOf(gs.List),message:Object(n.a)("FailedToPublish").isRequired,onRepublish:r.a.func.isRequired};var xa=Oa;const ya={onRepublish:s("N4ZN").a};var va=Object(na.connect)(null,ya)(xa),Ca=s("gGDi"),Ta=s("S5kL"),wa=s("k8Ub"),Ia=s("YICO");const Sa=7;var ka=s("Jrbl"),Ra=s("VADA"),Aa=s("pHbL"),Na=s("SGjM");const Pa=Object(Ke.default)(({companyLogo:e,customChatName:t})=>new $e.a({avatar:e,firstName:t,senderType:D.AGENT}));var Ea=s("YPLr"),Ma=s("Avso");const _a=Object(Ke.default)((e,t,s)=>{const n=Object(Ea.agentTypeToSenderType)(Object(Ma.getAgentType)(e)||s);return new $e.a({id:Object(Ma.getUserId)(e)||t,avatar:Object(Ma.getAvatar)(e),firstName:Object(Ma.getFirstName)(e),email:Object(Ma.getEmail)(e),lastName:Object(Ma.getLastName)(e),senderType:n})}),Fa=o.a.div.withConfig({displayName:"InitialMessageAvatar__MultiAvatarWrapper",componentId:"wn6bo-0"})(["width:100%;height:100%;display:flex;justify-content:center;flex-wrap:wrap;margin-right:4px;margin-left:-4px;& > *{flex:1;line-height:1;position:relative;& > *{position:absolute;left:0;bottom:-8px;}div{background-color:white;}}"]);class La extends _.PureComponent{getSenderAvatars(){const{chatHeadingConfig:e,sender:t,sendFromResponders:s}=this.props;if(Object(et.isFromBot)(t))return Object(gs.List)([t]);if(s.size)return Object(Na.a)(_a,s);const n=Object(Ra.a)(e);return n?Object(gs.List)([Pa({companyLogo:n,customChatName:Object(Aa.a)(e)})]):Object(gs.List)()}renderAvatars(){const e=this.getSenderAvatars();if(!e.size)return Object(I.jsx)(Q,{});if(1===e.size){const t=e.get(0);return Object(I.jsx)(Q,{sender:t})}const t=2===e.size;return Object(I.jsx)(Fa,{children:e.map((e,s)=>Object(I.jsx)(Q,{sender:e,size:t?"xs":"xxs"},s))})}render(){return Object(I.jsx)(ue,{children:this.renderAvatars()})}}La.displayName="InitialMessageAvatar";La.propTypes={chatHeadingConfig:r.a.oneOfType([Object(n.a)("CompanyChatHeadingConfig"),Object(n.a)("OwnerChatHeadingConfig"),Object(n.a)("UsersAndTeamsChatHeadingConfig")]),sendFromResponders:r.a.instanceOf(gs.List).isRequired,sender:Object(n.a)("Sender")};var qa=La;class Ba extends _.PureComponent{constructor(e){super(e);this.handleQuickReplySend=()=>{const{message:e,publishMessage:t}=this.props,{selectedQuickReply:s}=this.state;t({text:Object(Ta.a)(s),quickReply:Object(wa.a)(e).set("quickReplies",[s])})};this.handleQuickReplySelect=({target:{value:e}})=>{const{message:t}=this.props,s=Object(wa.d)(t).filter(t=>Object(Ta.b)(t)===e).first();this.setState({selectedQuickReply:s})};this.showQuickReplySelection=()=>{const{message:e}=this.props,t=Object(wa.d)(e),s=Object(wa.b)(e);return this.showQuickReplies()&&t.count()>Sa&&!s};this.renderQuickReplySelect=()=>{const{message:e,isThreadStarted:t,requiresExplicitConsentToProcess:s}=this.props,{selectedQuickReply:n}=this.state,a=Object(wa.d)(e);return Object(I.jsx)("div",{className:"m-y-2",children:Object(I.jsx)(ka.a,{quickReplyOptions:a,disabled:s||!t,onChange:this.handleQuickReplySelect,value:Object(Ta.b)(n),placeholder:V.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};this.renderQuickReplySendButton=()=>{const{isThreadStarted:e}=this.props,{selectedQuickReply:t}=this.state;return Object(I.jsx)(xe,{children:Object(I.jsx)(qn.a,{disabled:!e||!Object(Ta.b)(t),onClick:this.handleQuickReplySend,size:"sm",use:"primary",children:Object(I.jsx)(ze.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};this.state={selectedQuickReply:Object(gs.Map)()}}get sender(){const{message:e,senders:t}=this.props;return st(e,t)}hasQuickReplyOptions(){const{message:e}=this.props,t=Object(L.getSenderType)(e);return Object(wa.a)(e)&&t!==D.VISITOR}showQuickReplies(){const{hasUnansweredQuickReplyMessage:e,positionDescriptors:t}=this.props,s=e&&t.get(ps.c);return this.hasQuickReplyOptions()&&s}renderAvatar(){const{chatHeadingConfig:e,sendFromResponders:t}=this.props;return Object(I.jsx)(qa,{chatHeadingConfig:e,sender:this.sender,sendFromResponders:t})}renderQuickReplyGroup(){const{isThreadStarted:e,message:t,publishMessage:s,requiresExplicitConsentToProcess:n}=this.props,a=Object(wa.d)(t),r=Object(wa.b)(t);return Object(I.jsx)(xe,{children:Object(I.jsx)(Ia.a,{disabled:n||!e,options:a,message:t,multiSelect:r,publishMessage:s})})}renderContentSection(){const e=Object(rs.a)(["metadata","@type"]),{message:t}=this.props;let s,n;if(Boolean(e(t))){s=Object(L.getPlainText)(t);n=Object(L.getRichText)(t)}else{s=Object(Ca.b)(t);n=Object(Ca.a)(t)}const a=Cn.a.link(n,{stripPrefix:!1});return Object(I.jsxs)(me,{children:[Object(I.jsx)(as,{messageId:t.id,"aria-label":`${V.a.text("conversations-visitor-message-history.agentSays")} ${Object(L.getPlainText)(t)}`,contentText:a||s}),this.showQuickReplySelection()&&this.renderQuickReplySelect()]})}renderMessageFooter(){const{message:e}=this.props,t=Object(wa.d)(e),s=Object(wa.b)(e);return this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=Sa||s)?this.renderQuickReplyGroup():null}render(){const{positionDescriptors:e}=this.props,t=e.get(ps.a);return Object(I.jsxs)(ke,{use:W.a,children:[t&&Object(I.jsx)(ve,{children:this.renderAvatar()}),Object(I.jsx)(fe,{shouldFocusMessage:Boolean(this.showQuickReplies()),children:this.renderContentSection()}),this.renderMessageFooter()]})}}Ba.displayName="InitialMessage";Ba.propTypes={chatHeadingConfig:r.a.oneOfType([Object(n.a)("CompanyChatHeadingConfig"),Object(n.a)("OwnerChatHeadingConfig"),Object(n.a)("UsersAndTeamsChatHeadingConfig")]),hasUnansweredQuickReplyMessage:r.a.bool,isThreadStarted:r.a.bool.isRequired,message:Object(n.a)("InitialMessage").isRequired,positionDescriptors:hs.a.isRequired,publishMessage:r.a.func,requiresExplicitConsentToProcess:r.a.bool.isRequired,sendFromResponders:r.a.instanceOf(gs.List).isRequired,senders:G.a.isRequired};var Ha=Ba,za=s("p9k8"),Da=s("GOyg"),Va=s("hTKa"),Ua=s("PYok"),Qa=s("byjC"),Wa=s("k09d"),Ga=s("tAuz");const Ya=e=>{const t=Object(Wa.a)(e);return{chatHeadingConfig:Object(Da.a)(e),sendFromResponders:Object(Va.a)(e),hasUnansweredQuickReplyMessage:Object(Qa.a)(e,{thread:t}),isThreadStarted:Object(za.a)(t),mobile:Object(Ga.getIsMobile)(e)}},Ka={publishMessage:Ua.a};var Ja=Object(na.connect)(Ya,Ka)(Ha);const Xa=e=>{const t=Object(L.getSenderType)(e);return Object(wa.a)(e)&&t!==D.VISITOR};class $a extends _.PureComponent{constructor(e){super(e);this.handleQuickReplySend=()=>{const{message:e,publishMessage:t}=this.props,{selectedQuickReply:s}=this.state;t({text:Object(Ta.a)(s),quickReply:Object(wa.a)(e).set("quickReplies",[s])})};this.handleQuickReplySelect=({target:{value:e}})=>{const{message:t}=this.props,s=Object(wa.d)(t).filter(t=>Object(Ta.b)(t)===e).first();this.setState({selectedQuickReply:s})};this.showQuickReplies=()=>{const{hasUnansweredQuickReplyMessage:e,message:t,positionDescriptors:s}=this.props,n=e&&s.get(ps.c);return Xa(t)&&n};this.showQuickReplySelection=()=>{const{message:e}=this.props,t=Object(wa.d)(e),s=Object(wa.b)(e);return this.showQuickReplies()&&t.count()>Sa&&!s};this.renderQuickReplyGroup=()=>{const{isThreadStarted:e,message:t,publishMessage:s,requiresExplicitConsentToProcess:n}=this.props,a=Object(wa.d)(t),r=Object(wa.b)(t);return Object(I.jsx)(xe,{children:Object(I.jsx)(Ia.a,{options:a,disabled:n||!e,message:t,multiSelect:r,publishMessage:s,onChange:this.handleQuickReplyUpdate})})};this.renderQuickReplySendButton=()=>{const{isThreadStarted:e}=this.props,{selectedQuickReply:t}=this.state;return Object(I.jsx)(xe,{children:Object(I.jsx)(qn.a,{disabled:!e||!Object(Ta.b)(t),onClick:this.handleQuickReplySend,size:"sm",use:"primary",children:Object(I.jsx)(ze.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})})})};this.renderQuickReplySelect=()=>{const{message:e,isThreadStarted:t,requiresExplicitConsentToProcess:s}=this.props,{selectedQuickReply:n}=this.state,a=Object(wa.d)(e);return Object(I.jsx)("div",{className:"m-y-2",children:Object(I.jsx)(ka.a,{quickReplyOptions:a,disabled:s||!t,onChange:this.handleQuickReplySelect,value:Object(Ta.b)(n),placeholder:V.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")})})};this.state={selectedQuickReply:Object(gs.Map)()}}isSentFromVisitor(){return Object(et.isFromVisitor)(this.props.message)}get sender(){const{message:e,senders:t}=this.props;return st(e,t)}renderMessageHeader(){const{positionDescriptors:e}=this.props;if(!e.includes(ps.b)||this.isSentFromVisitor())return null;const t=this.sender,s=at(t);return Object(I.jsxs)(ve,{children:[Object(I.jsx)(ue,{children:Object(I.jsx)(Q,{sender:t,isLoading:s})}),Object(I.jsx)(Te,{children:Object(I.jsx)(We,{isSenderLoading:s,sender:t})})]})}renderTimeStamp(){const{message:e,positionDescriptors:t,locale:s}=this.props,n=t.includes(ps.e),a=Object(L.getTimestamp)(e);return n&&a?Object(I.jsx)(xe,{children:Object(I.jsx)(Me.a,{use:"help",children:new Date(a).toLocaleTimeString(s,{hour:"2-digit",minute:"2-digit"})})}):null}renderMessageFooter(){const{message:e}=this.props,t=Object(wa.d)(e),s=Object(wa.b)(e);return this.showQuickReplies()&&this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=Sa||s)?this.renderQuickReplyGroup():this.renderTimeStamp()}render(){const{fileAttachments:e,message:t,positionDescriptors:s,toggleOpen:n,mobile:a,hasUnansweredQuickReplyMessage:r}=this.props,i=this.isSentFromVisitor()?W.c:W.a;return Object(I.jsxs)(ke,{use:i,children:[this.renderMessageHeader(),Object(I.jsx)(kn,{senderName:Object(q.e)(this.sender),fileAttachments:e,isLastMessage:s.includes(ps.c),message:t,quickReplySelect:this.showQuickReplySelection()&&this.renderQuickReplySelect,mobile:a,toggleOpen:n,hasUnansweredQuickReplyMessage:r}),this.renderMessageFooter()]})}}$a.displayName="CommonMessage";$a.propTypes={fileAttachments:r.a.instanceOf(gs.List),hasUnansweredQuickReplyMessage:r.a.bool,isThreadStarted:r.a.bool.isRequired,locale:r.a.string.isRequired,message:r.a.oneOfType([Object(n.a)("CommonMessage"),Object(n.a)("PartialMessage")]).isRequired,mobile:r.a.bool,positionDescriptors:hs.a.isRequired,publishMessage:r.a.func,requiresExplicitConsentToProcess:r.a.bool.isRequired,senders:G.a,toggleOpen:r.a.func};var Za=$a,er=s("jxkM"),tr=s("G53s");const sr=e=>{const t=Object(Wa.a)(e);return{hasUnansweredQuickReplyMessage:Object(Qa.a)(e,{thread:t}),isThreadStarted:Object(za.a)(t),mobile:Object(Ga.getIsMobile)(e),locale:Object(tr.b)(e)}},nr={publishMessage:Ua.a,toggleOpen:er.toggleOpen};var ar=Object(na.connect)(sr,nr)(Za),rr=s("EjiN");const ir=e=>({requiresExplicitConsentToProcess:Object(rr.a)(e)}),or={},cr=Object(na.connect)(ir,or),lr=["id"],dr=["timestamp"],ur=(Object(rs.a)(lr),Object(rs.a)(dr)),pr=Object(_.memo)(({message:e,labelPadding:t,locale:s})=>{const n=ur(e),a=new Date(n).toLocaleDateString(s,{year:"numeric",month:"long",day:"numeric"});return Object(I.jsx)(ut,{labelPadding:t,children:Object(I.jsx)(Me.a,{use:"help",children:a})})});pr.displayName="DateLabelMessage";pr.propTypes={labelPadding:r.a.string,locale:r.a.string.isRequired,message:Object(n.a)("DateMessage").isRequired};var hr=pr;const mr=o.a.div.withConfig({displayName:"DateLabel__StyleWrapper",componentId:"sc-1gp247n-0"})(["","{border-color:",";}"],lt,g.f),br=e=>Object(I.jsx)(mr,{children:Object(I.jsx)(hr,Object.assign({},e,{labelPadding:"m-y-3"}))});br.displayName="DateLabel";br.propTypes=hr.propTypes;var gr=br;const jr=e=>({locale:Object(tr.b)(e)});var fr=Object(na.connect)(jr,null)(gr),Or=s("x1PU"),xr=s("FBcP");const yr=e=>t=>{const s=Object(na.useSelector)(xr.getSessionId);return Object(I.jsx)(e,Object.assign({},t,{sessionId:s}))};var vr=s("9XKB");const Cr=e=>t=>{const s=Object(na.useSelector)(vr.getHubspotUtk);return Object(I.jsx)(e,Object.assign({},t,{hubspotUtk:s}))};function Tr(e){return t=>{const s=Object(na.useSelector)(ha.getCurrentThreadId);return Object(I.jsx)(e,Object.assign({},t,{threadId:s}))}}s.d(t,"a",(function(){return Lr}));const{ACTIVELY_PUBLISHING:wr,COMMON_MESSAGE:Ir,PARTIAL_MESSAGE:Sr,DATE_MESSAGE:kr,EMAIL_CAPTURE_PROMPT:Rr,FAILED_TO_PUBLISH:Ar,INITIAL_MESSAGE:Nr,OFFICE_HOURS:Pr,TYPICAL_RESPONSE_TIME:Er,TYPING:Mr,FEEDBACK_SURVEY:_r}=Or.a,Fr=cr(ar),Lr={[wr]:An,[Ir]:Fr,[Sr]:Fr,[kr]:fr,[Rr]:ga,[Ar]:va,[Nr]:cr(Ja),[Pr]:us,[Er]:us,[Mr]:it,[_r]:Tr(yr(Cr(Fn)))}},"5els":function(e,t,s){var n=s("uIOU"),a=s("EzJv"),r=s("2+Io");function i(){this.size=0;this.__data__={hash:new n,map:new(r||a),string:new n}}e.exports=i},"6GFX":function(e,t,s){"use strict";s.r(t);s.d(t,"generateIdForFile",(function(){return n}));const n=({file:e,timestamp:t})=>`${e?e.name:""}-${t}`},"6upE":function(e,t){function s(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=s},"7XiC":function(e,t,s){"use strict";var n=s("VfuR"),a=s.n(n),r=s("9f1P"),i=s.n(r),o=s("/mXs"),c=s("P7jJ"),l=s("3MJX"),d=s("ET5w"),u=s("Tbmo"),p=s("+KD7"),h=s("npjq"),m=s("QgEn");const b=i.a.div.withConfig({displayName:"ChatAreaAlert__Wrapper",componentId:"ar5lxx-0"})(["width:100%;display:flex;justify-content:center;background-color:transparent;"]),g=i.a.div.withConfig({displayName:"ChatAreaAlert__Alert",componentId:"ar5lxx-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:7px 14px;min-width:85%;background-color:",";border:1px solid ",";font-weight:500;font-size:12px;"],p.n,p.o),j=i.a.div.withConfig({displayName:"ChatAreaAlert__Title",componentId:"ar5lxx-2"})(["flex:0 1 100%;"]),f=i.a.div.withConfig({displayName:"ChatAreaAlert__LinkWrapper",componentId:"ar5lxx-3"})(["flex:0 0 auto;"]),O=i()(o.a).withConfig({displayName:"ChatAreaAlert__StyledCloseButton",componentId:"ar5lxx-4"})(["position:static;flex:0 0 36px;margin-left:8px;margin-right:-8px;"]),x=({title:e,link:t,onClose:s})=>Object(m.jsx)(b,{"data-test-id":"alert",role:"alert",children:Object(m.jsxs)(g,{children:[Object(m.jsx)(j,{children:e}),t&&Object(m.jsx)(f,{children:t}),Object(m.jsx)(O,{use:"transparent-on-background",theme:Object(u.a)(p.q,Object(d.a)()),"aria-label":h.a.text("conversations-visitor-experience-components.visitorExperienceAriaLabels.dismiss"),onClick:s,children:Object(m.jsx)(c.a,{icon:Object(m.jsx)(l.a,{})})})]})});x.propTypes={link:a.a.node,onClose:a.a.func.isRequired,title:a.a.node.isRequired};x.defaultProps={onClose:()=>{}};x.displayName="ChatAreaAlert";t.a=x},"7yF8":function(e,t,s){"use strict";var n=s("dLEV"),a=s("Pda3"),r=s("PaBm"),i=s("BxyF"),o=s("JGJA"),c=s("MBJP"),l=s("KXN9"),d=s("x1JE"),u=s("5vQK");const p=Object(o.a)("subscriptions"),h=(e,{clientKey:t=u.a}={})=>t,m=Object(c.a)([h,p],d.getEntry);Object(c.a)([m],l.a);var b=s("rjAk"),g=s("Ryja"),j=s("YNiY"),f=s("ZSXR");s.d(t,"a",(function(){return O}));const O=Object(n.createSelector)([g.getAsyncStagedThread,i.getAsyncPubSubClient,b.hasPersistedThreads,m,j.a,f.a],(e,t,s,n,i,o)=>{if(Object(a.isStarted)(e))return!1;if(Object(a.isUninitialized)(e)&&!s)return!0;return!(!Object(a.isSucceeded)(i)&&!Object(a.isUninitialized)(i)||!Object(a.isSucceeded)(o)&&!Object(a.isUninitialized)(o))&&(!!(s&&Object(r.isClientReady)(t)&&Object(a.isSucceeded)(n))||!!(Object(a.isSucceeded)(e)&&Object(r.isClientReady)(t)&&Object(a.isSucceeded)(n)))})},"80AS":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("dLEV"),a=s("J4oD"),r=s("C3IS"),i=s("V+nC"),o=s("iPDb"),c=s("k8Ub"),l=s("kWFB");const d=Object(n.createSelector)([a.historyDataForThread],e=>{if(!e||!Object(l.hasMessages)(e))return!0;const t=Object(o.a)(e).filter(e=>Object(r.b)(e)&&!Object(r.c)(e)||Object(i.a)(e)).last();return Object(c.c)(t)})},"84zR":function(e,t,s){"use strict";s.r(t);s.d(t,"uploadAttachment",(function(){return b}));var n=s("ughT"),a=s("y5/z"),r=s("FBcP"),i=s("9P7L"),o=s("xAl4"),c=s("JIa2"),l=s("VXRw"),d=s("lnDz"),u=s("3yBC"),p=s("gygH"),h=s("Wnz4"),m=s("gQ5O");const b=({attachment:e,threadId:t})=>(s,b)=>{const g=Date.now();s(Object(l.attachmentUploadStart)({attachment:e,threadId:t}));const j=Object(r.getSessionId)(b()),f=Object(n.getLocalId)(e),O=Object(n.getFile)(e),x=Object(c.createFormDataForAttachment)({file:O});return Object(i.fetchAttachmentUploadUrlClient)({sessionId:j,threadId:t}).then(({uploadUrl:e})=>Object(o.uploadAttachmentClient)({formData:x,onProgress:({loaded:e,total:n})=>{s(Object(p.handleAttachmentUploadProgress)({localId:f,threadId:t,loaded:e,total:n}))},uploadUrl:`${m.a}/${e}`})).then(({objects:[e]})=>{const n=Date.now();s(Object(d.attachmentUploadComplete)({localId:f,threadId:t,fileId:e.id,uploadedFile:e}));s(Object(a.trackInteraction)("attached-file",{action:"attached file","attachment-type":e.extension,"attachment-size-bytes":O.size,"upload-time-ms":n-g}))}).catch(e=>{var n;if(null!=e&&null!==(n=e.responseJSON)&&void 0!==n&&null!==(n=n.message)&&void 0!==n&&n.includes("not allowed")){s(Object(h.attachmentError)(u.a,t));s(Object(a.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"invalid file type"}))}else{s(Object(h.attachmentError)(u.c,t));s(Object(a.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"upload error"}))}})}},"8FuJ":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("YPLr"),a=s("oLsC"),r=s("Avso"),i=s("MBJP");const o=Object(i.b)((e,t,s)=>{const i=Object(n.agentTypeToSenderType)(Object(r.getAgentType)(e)||s);return new a.a({id:Object(r.getUserId)(e)||t,avatar:Object(r.getAvatar)(e),firstName:Object(r.getFirstName)(e),email:Object(r.getEmail)(e),lastName:Object(r.getLastName)(e),senderType:i})})},"8M+t":function(e,t,s){"use strict";var n=s("VfuR"),a=s.n(n),r=s("Ktcs"),i=s("9f1P"),o=s.n(i),c=s("+KD7"),l=s("0IL2"),d=s("7XiC"),u=s("sl/w"),p=s("yS+k"),h=s("+WNO"),m=s("QgEn");const b=o.a.div.withConfig({displayName:"ProcessConsentPrompt__ConsentPromptWrapper",componentId:"s2qyig-0"})(["border-top:2px solid ",";"],c.f);class g extends r.Component{componentDidMount(){const{trackInteraction:e}=this.props;e("widget-interaction",{action:"view consent to process"})}render(){const{coloring:e,consentToProcess:t,closeConsentToProcess:s,consentToProcessError:n,consentToProcessMessage:a,dismissConsentToProcessError:r,showGdprConsentToProcessButton:i}=this.props;return Object(m.jsx)(b,{children:n?Object(m.jsx)(d.a,{title:Object(m.jsx)(u.a,{message:"conversations-visitor-ui.network.offline.title"}),onClose:r}):Object(m.jsx)(l.a,{showButton:i,message:a,onClick:t,onClose:s,coloring:e,isOneOfTargetedProductPages:Object(h.isOneOfTargetedProductPages)(),isPortal53:Object(p.a)()})})}}g.displayName="ProcessConsentPrompt";g.propTypes={closeConsentToProcess:a.a.func,coloring:a.a.object,consentToProcess:a.a.func,consentToProcessError:a.a.bool,consentToProcessMessage:a.a.string,dismissConsentToProcessError:a.a.func,showGdprConsentToProcessButton:a.a.bool,trackInteraction:a.a.func};t.a=g},"8Q5G":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,...t)=>{"function"==typeof e&&e(...t)}},"8f3s":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("ughT"),a=s("l6Ux"),r=s("p3n+");const i=e=>{if(!e)return null;const t=e.filter(a.isUploadCompleted).map(n.getFileId);return t.size?Object(r.a)({fileIds:t}):null}},"8g7g":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("ughT"),a=s("y5/z"),r=s("PpSk"),i=s("jVj2");const o=({attachment:e,thread:t})=>s=>{const o=Object(r.getThreadId)(t),c=Object(n.getLocalId)(e);s(Object(i.removeAttachment)({localId:c,threadId:o}));s(Object(a.trackInteraction)("remove-staged-attachment",{action:"remove staged attachment"}))}},"9C7g":function(e,t,s){"use strict";var n=s("QYOI"),a="<<anonymous>>",r={listOf:u,mapOf:h,orderedMapOf:m,setOf:b,orderedSetOf:g,stackOf:j,iterableOf:f,recordOf:O,shape:y,contains:y,mapContains:v,list:c("List",n.List.isList),map:c("Map",n.Map.isMap),orderedMap:c("OrderedMap",n.OrderedMap.isOrderedMap),set:c("Set",n.Set.isSet),orderedSet:c("OrderedSet",n.OrderedSet.isOrderedSet),stack:c("Stack",n.Stack.isStack),seq:c("Seq",n.Seq.isSeq),record:c("Record",(function(e){return e instanceof n.Record})),iterable:c("Iterable",n.Iterable.isIterable)};function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof n.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function o(e){function t(t,s,n,r,i,o){for(var c=arguments.length,l=Array(c>6?c-6:0),d=6;d<c;d++)l[d-6]=arguments[d];o=o||n;r=r||a;return null!=s[n]?e.apply(void 0,[s,n,r,i,o].concat(l)):t?new Error("Required "+i+" `"+o+"` was not specified in `"+r+"`."):void 0}var s=t.bind(null,!1);s.isRequired=t.bind(null,!0);return s}function c(e,t){function s(s,n,a,r,o){var c=s[n];if(!t(c)){var l=i(c);return new Error("Invalid "+r+" `"+o+"` of type `"+l+"` supplied to `"+a+"`, expected `"+e+"`.")}return null}return o(s)}function l(e,t,s){function n(n,a,r,o,c){for(var l=arguments.length,d=Array(l>5?l-5:0),u=5;u<l;u++)d[u-5]=arguments[u];var p=n[a];if(!s(p)){var h=o,m=i(p);return new Error("Invalid "+h+" `"+c+"` of type `"+m+"` supplied to `"+r+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+r+"` for propType `"+c+"`, expected a function.");for(var b=p.toArray(),g=0,j=b.length;g<j;g++){var f=e.apply(void 0,[b,g,r,o,c+"["+g+"]"].concat(d));if(f instanceof Error)return f}}return o(n)}function d(e){function t(t,s,n,a,r){for(var i=arguments.length,o=Array(i>5?i-5:0),c=5;c<i;c++)o[c-5]=arguments[c];var l=t[s];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+r+"`, expected a function.");for(var d=l.keySeq().toArray(),u=0,p=d.length;u<p;u++){var h=e.apply(void 0,[d,u,n,a,r+" -> key("+d[u]+")"].concat(o));if(h instanceof Error)return h}}return o(t)}function u(e){return l(e,"List",n.List.isList)}function p(e,t,s,n){function a(){for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return l(e,s,n).apply(void 0,r)||t&&d(t).apply(void 0,r)}return o(a)}function h(e,t){return p(e,t,"Map",n.Map.isMap)}function m(e,t){return p(e,t,"OrderedMap",n.OrderedMap.isOrderedMap)}function b(e){return l(e,"Set",n.Set.isSet)}function g(e){return l(e,"OrderedSet",n.OrderedSet.isOrderedSet)}function j(e){return l(e,"Stack",n.Stack.isStack)}function f(e){return l(e,"Iterable",n.Iterable.isIterable)}function O(e){function t(t,s,a,r,o){for(var c=arguments.length,l=Array(c>5?c-5:0),d=5;d<c;d++)l[d-5]=arguments[d];var u=t[s];if(!(u instanceof n.Record)){var p=i(u);return new Error("Invalid "+r+" `"+o+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js Record.")}for(var h in e){var m=e[h];if(m){var b=u.toObject(),g=m.apply(void 0,[b,h,a,r,o+"."+h].concat(l));if(g)return g}}}return o(t)}function x(e){var t=void 0===arguments[1]?"Iterable":arguments[1],s=void 0===arguments[2]?n.Iterable.isIterable:arguments[2];function a(n,a,r,o,c){for(var l=arguments.length,d=Array(l>5?l-5:0),u=5;u<l;u++)d[u-5]=arguments[u];var p=n[a];if(!s(p)){var h=i(p);return new Error("Invalid "+o+" `"+c+"` of type `"+h+"` supplied to `"+r+"`, expected an Immutable.js "+t+".")}var m=p.toObject();for(var b in e){var g=e[b];if(g){var j=g.apply(void 0,[m,b,r,o,c+"."+b].concat(d));if(j)return j}}}return o(a)}function y(e){return x(e)}function v(e){return x(e,"Map",n.Map.isMap)}e.exports=r},"9P7L":function(e,t,s){"use strict";s.r(t);s.d(t,"fetchAttachmentUploadUrlClient",(function(){return r}));var n=s("VYoM");const a="livechat-public/v1/attachment/upload-url",r=({sessionId:e,threadId:t})=>n.a.get(a,{query:{sessionId:e,threadId:t}})},Apky:function(e,t,s){"use strict";s.r(t);var n=s("p9k8"),a=s("19qb"),r=s("eLkp"),i=s("A+8x"),o=s("EjiN"),c=s("k09d"),l=s("XjLd"),d=s("Wzl7"),u=s("zB5l"),p=s("AbLd"),h=s("V2EP"),m=s("CM48");const b=e=>({shouldShowMeetingsLink:Object(u.a)(e),isThreadStarted:Object(n.a)(Object(c.a)(e)),requiresExplicitConsentToProcess:Object(o.a)(e),showingGdprProcess:Object(r.a)(e)&&!Object(m.getUserHasGivenConsentToProcess)(e),renderCookieConsentPrompt:Object(i.a)(e),showingHsBranding:Object(l.a)(e)}),g={toggleOnAndOffInputFocus:p.b,selectAttachmentFile:h.a};t.default=Object(a.connect)(b,g)(d.a)},BB3q:function(e,t,s){var n=s("QhUm");function a(e,t){var s=n(this,e),a=s.size;s.set(e,t);this.size+=s.size==a?0:1;return this}e.exports=a},"BW+T":function(e,t,s){var n=s("d1Q1"),a="Expected a function";function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var s=function(){var n=arguments,a=t?t.apply(this,n):n[0],r=s.cache;if(r.has(a))return r.get(a);var i=e.apply(this,n);s.cache=r.set(a,i)||r;return i};s.cache=new(r.Cache||n);return s}r.Cache=n;e.exports=r},BYz9:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Nnwm"),a=s("NL4B");const r=e=>Object(n.buildSenderLocator)(Object(a.getType)(e),Object(a.getId)(e))},DOHQ:function(e,t,s){var n=s("8i16")["__core-js_shared__"];e.exports=n},EzJv:function(e,t,s){var n=s("RLxx"),a=s("ccWV"),r=s("Uz5A"),i=s("mMAp"),o=s("IrnW");function c(e){var t=-1,s=null==e?0:e.length;this.clear();for(;++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n;c.prototype.delete=a;c.prototype.get=r;c.prototype.has=i;c.prototype.set=o;e.exports=c},HU6Q:function(e,t,s){"use strict";s.r(t);s.d(t,"fileExceedsSizeLimit",(function(){return a}));var n=s("gQ5O");const a=e=>e.size>n.b},IGxS:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("JGJA");const a=Object(n.a)("fileUploads")},IrnW:function(e,t,s){var n=s("LPlp");function a(e,t){var s=this.__data__,a=n(s,e);if(a<0){++this.size;s.push([e,t])}else s[a][1]=t;return this}e.exports=a},JIa2:function(e,t,s){"use strict";s.r(t);s.d(t,"createFormDataForAttachment",(function(){return n}));const n=({file:e})=>{const t=new FormData;t.append("file",e);return t}},JWgK:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("dLEV"),a=s("jM00"),r=s("byjC"),i=s("80AS"),o=s("evSZ");const c=Object(n.createSelector)([i.a,a.a,r.a,o.a],(e,t,s,n)=>!(!e&&s||n)&&(!t||!t.size))},KLi6:function(e,t,s){var n=s("uQvf"),a="__lodash_hash_undefined__";function r(e,t){var s=this.__data__;this.size+=this.has(e)?0:1;s[e]=n&&void 0===t?a:t;return this}e.exports=r},KSjU:function(e,t,s){"use strict";var n=s("MJM1");t.a=Object(n.a)(["meetingsLinkUrl"])},LPlp:function(e,t,s){var n=s("+a0K");function a(e,t){for(var s=e.length;s--;)if(n(e[s][0],t))return s;return-1}e.exports=a},Nnwm:function(e,t,s){"use strict";s.r(t);var n=s("Mx3c"),a=s("QYOI"),r=Object(a.Record)({senderId:null,senderType:null},"SenderLocator");s.d(t,"buildSenderLocator",(function(){return o}));const i=[n.AGENT,n.BOT,n.SYSTEM,n.VISITOR,n.INTEGRATOR],o=(e,t)=>{i.includes(e)||console.warn(`buildSenderLocator received invalid sender type ${e} expected one of: ${i}`);return r({senderType:e,senderId:t?""+t:null})}},OI0Z:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("Lm/k"),a=s("Ktcs"),r=s("VfuR"),i=s.n(r),o=s("npjq"),c=s("QgEn");const l=["value"];class d extends a.Component{render(){const e=this.props,{value:t}=e,s=Object(n.a)(e,l);return Object(c.jsx)("span",{children:o.a.formatSize(t,s)})}}d.displayName="FormattedSize";d.propTypes={value:i.a.number.isRequired}},OoDT:function(e,t,s){"use strict";var n=s("Lm/k"),a=s("9f1P"),r=s.n(a),i=s("Ktcs"),o=s("QgEn");const c=["children","onScrollToTop","onScrollFromBottom","onScrollToBottom","stickToTop","topThreshold","bottomThreshold"],l=r.a.div.withConfig({displayName:"ScrollWrapper__Wrapper",componentId:"sc-1poukw-0"})(["flex:1;overflow-y:auto;display:flex;flex-direction:column-reverse;align-self:stretch;"]),d=r.a.div.withConfig({displayName:"ScrollWrapper__Spacer",componentId:"sc-1poukw-1"})(["flex:1 1 0px;"]),u=Object(i.forwardRef)((e,t)=>{let{children:s,onScrollToTop:a=(()=>{}),onScrollFromBottom:r=(()=>{}),onScrollToBottom:u=(()=>{}),stickToTop:p=null,topThreshold:h=300,bottomThreshold:m=300}=e,b=Object(n.a)(e,c);const[g,j]=Object(i.useState)(!1),[f,O]=Object(i.useState)(!0);Object(i.useEffect)(()=>{g&&a()},[g,a]);Object(i.useEffect)(()=>{f?u():r()},[f,u,r]);const x=Object(i.useCallback)(e=>{const{scrollHeight:t,clientHeight:s,scrollTop:n}=e.target;t-s-Math.abs(n)<=h?j(!0):j(!1);Math.abs(n)>=m?O(!1):O(!0)},[h,m]);Object(i.useEffect)(()=>{if(t&&"function"!=typeof t&&t.current){const{current:e}=t;e.addEventListener("scroll",x,{passive:!0});return()=>{e.removeEventListener("scroll",x)}}},[t,x]);return Object(o.jsxs)(l,Object.assign({"data-test-id":"scroll-container"},b,{ref:t,children:[Object(o.jsx)(d,{}),s,p]}))});u.displayName="ScrollWrapper";var p=u,h=s("mKxs"),m=s("021p"),b=s("kWFB"),g=s("VfuR"),j=s.n(g),f=s("uax2"),O=s("t6nY"),x=s.n(O),y=s("eg5p"),v=s("sl/w");const C=r.a.div.withConfig({displayName:"ErrorState__ErrorWrapper",componentId:"sc-9n3cba-0"})(["display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column;"]),T=()=>Object(o.jsxs)(C,{children:[Object(o.jsx)("h5",{children:Object(o.jsx)(v.a,{message:"conversations-visitor-ui.asyncError.body"})}),Object(o.jsx)("div",{className:"m-top-3",children:Object(o.jsx)(v.a,{message:"conversations-visitor-ui.asyncError.noRetry"})})]});T.displayName="ErrorState";var w=T;const I=r.a.div.withConfig({displayName:"ThreadHistoryError__ThreadHistoryErrorWrapper",componentId:"eons6g-0"})(["text-align:center;flex-grow:1;"]),S=()=>Object(o.jsx)(I,{children:Object(o.jsx)(w,{})});S.displayName="ThreadHistoryError";var k=S;const R=e=>Object(o.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},e,{children:[Object(o.jsx)("g",{clipPath:"url(#downCaret__clip0_12_2697)",children:Object(o.jsx)("path",{d:"M2.67 7h-.008c-.737 0-1.403.302-1.883.788-.482.49-.78 1.166-.78 1.91 0 .742.298 1.416.782 1.909l13.334 13.516c.48.489 1.147.79 1.885.79.739 0 1.405-.302 1.886-.79L31.22 11.607c.483-.491.78-1.167.78-1.91 0-.743-.297-1.418-.78-1.909-.48-.486-1.144-.787-1.88-.788H2.67z"})}),Object(o.jsx)("defs",{children:Object(o.jsx)("clipPath",{id:"downCaret__clip0_12_2697",children:Object(o.jsx)("path",{d:"M0 0h32v32H0z"})})})]}));R.displayName="SVGDownCaret";var A=R,N=s("3S9s"),P=s("/mXs"),E=s("P7jJ"),M=s("rdz/"),_=s("y5/z"),F=s("19qb");const L=Object(a.keyframes)(["0%{opacity:0;}50%{opacity:0;}75%{opacity:.5}100%{opacity:1;}"]),q=Object(a.keyframes)(["0%{opacity:1;}50%{opacity:1;}75%{opacity:.5}100%{opacity:0;}"]),B=r()(P.a).withConfig({displayName:"ScrollToButton__StyledIconButton",componentId:"wd0qgk-0"})(["position:absolute;bottom:12px;left:12px;animation:",";animation-duration:300ms;animation-timing-function:",";"],({showScrollTo:e})=>e?L:q,({showScrollTo:e})=>e?"ease-in":"ease-out"),H=e=>Object(N.a)({components:{IconButton:{baseStyle:Object(a.css)(["width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;border:1px solid ",";background-color:#fff;"],e),_hovered:Object(a.css)(["background-color:",";"],Object(M.a)(e,95)),_pressed:Object(a.css)(["background-color:",";"],Object(M.a)(e,90))}}});function z({onClick:e,onAnimationEnd:t,coloring:s,showScrollTo:n}){const{accentColor:a}=s,r=Object(F.useDispatch)();function i(){e();r(Object(_.trackInteraction)("widget-interaction",{action:"clicked scroll to button"},!0))}return Object(o.jsx)(B,{theme:H(a),size:"sm",shape:"circle",use:"primary",onClick:i,onAnimationEnd:t,showScrollTo:n,"aria-hidden":!0,children:Object(o.jsx)(E.a,{icon:Object(o.jsx)(A,{fill:a}),size:"xs"})})}z.displayName="ScrollToButton";var D=z;const V=r()(f.a).withConfig({displayName:"ThreadHistoryFetcher__LoadingSpinnerWrapper",componentId:"mpap2q-0"})(["height:0;margin-top:20px;"]),U=r.a.div.withConfig({displayName:"ThreadHistoryFetcher__ScrollContainerWrapper",componentId:"mpap2q-1"})(["display:flex;justify-content:flex-end;flex-direction:column;overflow-x:hidden;overflow-y:hidden;position:relative;height:100%;"]);class Q extends i.PureComponent{constructor(e){super(e);this.handleScrollFromBottom=()=>{this.state.mountScrollTo||this.setState({mountScrollTo:!0,showScrollTo:!0})};this.handleScrollToBottom=()=>{this.state.mountScrollTo&&this.setState({mountScrollTo:!1})};this.handleAnimationEnd=()=>{this.state.mountScrollTo||this.setState({showScrollTo:!1})};this.state={mountScrollTo:!1,showScrollTo:!1};this.scrollWrapper=Object(i.createRef)();this.fetchHistory=this.fetchHistory.bind(this);this.scrollToBottom=this.scrollToBottom.bind(this)}componentDidMount(){this.scrollToBottom();this.fetchHistory()}scrollToBottom(){this.scrollWrapper.current&&this.scrollWrapper.current.scrollTo(0,0)}scrollToBottomIfInThreshold(){this.scrollWrapper.current&&Math.abs(this.scrollWrapper.current.scrollTop)<300&&this.scrollWrapper.current.scrollTo(0,0)}componentDidUpdate(e){const{threadId:t,messageCount:s,shouldScrollToBottom:n,isOnFocus:a}=this.props,{threadId:r,messageCount:i,shouldScrollToBottom:o,isOnFocus:c}=e,{current:l}=this.scrollWrapper;if(t===r)if(i){s!==i&&this.scrollToBottomIfInThreshold();n!==o&&l&&this.scrollToBottomIfInThreshold();a!==c&&l&&this.scrollToBottomIfInThreshold()}else this.scrollToBottom();else{this.fetchHistory();this.scrollToBottom()}}fetchHistory(){const{fetchThreadHistory:e,threadId:t,threadHistory:s,sessionId:n}=this.props;t!==y.a&&e({offsetOrdinal:Object(m.e)(s),offsetTimestamp:Object(m.f)(s),threadId:t,sessionId:n})}render(){const{children:e,isLoadingHistory:t,loadingHistoryFailed:s,threadId:n,threadHistory:a,hideScrollToButton:r}=this.props;if(t&&!Object(b.hasMessages)(a))return Object(o.jsx)(f.a,{grow:!0});if(s&&!Object(b.hasMessages)(a))return Object(o.jsx)(k,{});const i=x()(this.props.className,"messages-scroll-container-utv");return Object(o.jsxs)(U,{children:[Object(o.jsx)(p,{className:i,ref:this.scrollWrapper,onScrollToTop:this.fetchHistory,stickToTop:t&&Object(o.jsx)(V,{grow:!0}),onScrollFromBottom:this.handleScrollFromBottom,onScrollToBottom:this.handleScrollToBottom,children:e},n),this.state.showScrollTo&&!r&&Object(o.jsx)(D,{onClick:this.scrollToBottom,showScrollTo:this.state.mountScrollTo,onAnimationEnd:this.handleAnimationEnd,coloring:this.props.coloring})]})}}Q.propTypes={children:j.a.node.isRequired,className:j.a.string,coloring:j.a.object.isRequired,fetchThreadHistory:j.a.func.isRequired,hideScrollToButton:j.a.bool.isRequired,isLoadingHistory:j.a.bool,isOnFocus:j.a.bool.isRequired,loadingHistoryFailed:j.a.bool,messageCount:j.a.number.isRequired,sessionId:j.a.string.isRequired,shouldScrollToBottom:j.a.bool.isRequired,threadHistory:Object(h.a)("ThreadHistory"),threadId:j.a.number.isRequired};Q.displayName="ThreadHistoryFetcher";t.a=Q},QG41:function(e,t,s){var n=s("uQvf");function a(){this.__data__=n?n(null):{};this.size=0}e.exports=a},QVIP:function(e,t){var s=Function.prototype.toString;function n(e){if(null!=e){try{return s.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=n},"QVu+":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=3e3},QhUm:function(e,t,s){var n=s("xP7N");function a(e,t){var s=e.__data__;return n(t)?s["string"==typeof t?"string":"hash"]:s.map}e.exports=a},RLxx:function(e,t){function s(){this.__data__=[];this.size=0}e.exports=s},S2sp:function(e,t,s){"use strict";var n=s("Ktcs"),a=s("npjq"),r=s("sl/w"),i=s("OI0Z");const o=["PNG","GIF","JPEG","JPG"],c=e=>{const t=e.name.split("."),s=t[t.length-1]||"";return-1!==o.indexOf(s.toUpperCase())};var l=s("ughT");const d=e=>{const t=Object(l.getFile)(e),s=Object(l.getUploadProgress)(e);return t&&s?s/100*t.size:0};var u=s("n6o2"),p=s("4hT6"),h=s("l6Ux"),m=s("g/uM"),b=s("QgEn");class g extends n.Component{constructor(e){super(e);this.state={imageDataUrl:""}}componentDidMount(){this.processImageFile(this.props.imageFile)}componentDidUpdate(e){this.props.imageFile!==e.imageFile&&this.processImageFile(this.props.imageFile)}shouldComponentUpdate(e,t){return t.imageDataUrl!==this.state.imageDataUrl}processImageFile(e){const t=new FileReader;t.addEventListener("load",()=>{this.setState({imageDataUrl:t.result})});t.readAsDataURL(e)}render(){return Object(b.jsx)(m.a,{src:this.state.imageDataUrl})}}g.displayName="ImageAttachmentPreview";var j=g,f=s("Lm/k"),O=s("VfuR"),x=s.n(O),y=s("9f1P"),v=s.n(y);const C=s("57op").h;var T=s("CR0J");const w=["zIndex","value","theme"],I=v.a.div.withConfig({displayName:"VizExNanoProgress__Bar",componentId:"sc-1udknvh-0"})(["transition:width 0.2s ease-in-out;left:0;position:absolute;top:0;opacity:",";width:",";height:3px;z-index:",";background-color:",";"],({value:e})=>0===e?0:1,({value:e})=>e+"%",({zIndex:e})=>e,({theme:e})=>C(e)),S=e=>{let{zIndex:t=10,value:s=0,theme:n}=e,a=Object(f.a)(e,w);return Object(b.jsx)(I,Object.assign({},a,{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":s,role:"progressbar",zIndex:t,value:s,theme:n}))};S.propTypes={theme:T.a,value:x.a.number,zIndex:x.a.number};S.displayName="VizExNanoProgress";var k=S,R=s("rF4n"),A=s("Jr27");class N extends n.Component{customFilePreview(){const e=this.props.attachment,t=Object(l.getFile)(e);if(t&&c(t))return Object(b.jsx)(j,{imageFile:t})}fileInfo(){return Object(h.isUploadCompleted)(this.props.attachment)?Object(b.jsx)(i.a,{value:Object(p.getFileSize)(this.props.attachment)}):Object(b.jsx)(r.a,{message:"conversations-visitor-ui.stagedAttachment.uploadProgress",options:{uploadedBytes:a.a.formatSize(d(this.props.attachment),{precision:2,strip_insignificant_zeroes:!0}),totalBytes:a.a.formatSize(Object(p.getFileSize)(this.props.attachment))}})}renderProgress(){return Object(h.isUploadCompleted)(this.props.attachment)?null:Object(b.jsx)(k,{value:Object(l.getUploadProgress)(this.props.attachment)})}render(){return Object(b.jsxs)(R.default,{processing:!Object(h.isUploadCompleted)(this.props.attachment),fileName:Object(u.getFileName)(this.props.attachment),fileInfo:this.fileInfo(),preview:this.customFilePreview(),style:{minWidth:220},children:[Object(b.jsx)(A.a,{size:"xs",onClick:this.props.onRemove}),this.renderProgress()]})}}N.displayName="FileUpload";t.a=N},TXBG:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("KXN9"),a=s("Pda3"),r=s("x1JE"),i=s("QYOI"),o=s("dLEV"),c=s("bYG+"),l=s("mYRe");const d=Object(o.createSelector)([l.a],e=>e&&Object(r.getEntries)(e).size?Object(r.getEntries)(e).reduce((e,t,s)=>t&&s&&Object(a.isSucceeded)(t)?Object(c.a)(String(s),Object(n.a)(t),e):e,Object(i.Map)()):Object(i.Map)())},UfQw:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("JGJA");const a=Object(n.a)("fileUploadsErrors")},Uz5A:function(e,t,s){var n=s("LPlp");function a(e){var t=this.__data__,s=n(t,e);return s<0?void 0:t[s][1]}e.exports=a},V2EP:function(e,t,s){"use strict";var n=s("ejMo"),a=s("y5/z"),r=s("3yBC");const i=e=>{switch(e){case r.b:return"size limit exceeded";default:return null}};var o=s("Wnz4"),c=s("PpSk"),l=s("5N3d"),d=s("84zR");s.d(t,"a",(function(){return u}));const u=({file:e,thread:t})=>s=>{const r=Object(c.getThreadId)(t);return Object(l.validateAttachmentFile)(e).then(()=>{const t=new n.a({file:e,progress:0});return s(Object(d.uploadAttachment)({attachment:t,threadId:r}))}).catch(e=>{s(Object(o.attachmentError)(e,r));s(Object(a.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":i(e)}))})}},VXRw:function(e,t,s){"use strict";s.r(t);s.d(t,"attachmentUploadStart",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.d,({attachment:e,threadId:t})=>({payload:{attachment:e,threadId:t}}))},Vsm7:function(e,t,s){var n=s("QhUm");function a(e){return n(this,e).get(e)}e.exports=a},Wnz4:function(e,t,s){"use strict";s.r(t);s.d(t,"attachmentError",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.a,(e,t)=>({payload:{error:e,threadId:t}}))},Wzl7:function(e,t,s){"use strict";var n=s("VfuR"),a=s.n(n),r=s("Ktcs"),i=s("19qb"),o=s("8g7g"),c=s("V2EP"),l=s("jM00"),d=s("PYok"),u=s("7yF8"),p=s("dLEV"),h=s("Pda3"),m=s("BxyF");const b=Object(p.createSelector)([m.getAsyncPubSubClient],h.isFailed);var g=s("k09d"),j=s("g/i1"),f=s("sJho"),O=s("XjLd"),x=s("byjC"),y=s("ZAuv"),v=s("w1Zi"),C=s("o+We"),T=s("piVz"),w=s("80AS"),I=s("4fgK"),S=s("tAuz"),k=s("AbLd");const R=e=>{var t;return null===(t=e.widgetInputFocusStatus)||void 0===t?void 0:t.widgetInputIsOnFocus};var A=s("evSZ"),N=s("MJM1");const P=Object(N.a)(["isInitialInputFocusDisabled"]);var E=s("QnHA");const M=Object(p.createSelector)([E.a],e=>P(e));var _=s("0PDK");const F=e=>{var t;const s=Object(_.getSelectedThreadId)(e);return(null===(t=e.messageEditorStaging[s])||void 0===t?void 0:t.stagingText)||""};var L=s("BEfq"),q=s("yS+k"),B=s("1EAY"),H=s("RaQM"),z=s("JWgK");const D=e=>{const t=Object(g.a)(e),s=!Object(w.a)(e,{thread:t})&&Object(x.a)(e,{thread:t}),n=Object(I.getIsBot)(e)&&Object(H.getIsWidgetInAwayMode)(e)&&!Object(B.isPersistedThread)(t);return{coloring:Object(j.a)(e),currentConversation:t,disablePublish:!Object(u.a)(e),disableTextInput:s||n,showQuickReplyPlaceholder:s,isOnFocus:R(e),stagedMessage:F(e),messagesPageUri:Object(f.getMessagesPageUri)(e),networkOffline:b(e),showingHsBranding:Object(O.a)(e),showInitialMessageBubble:Object(T.a)(e),stagedAttachments:Object(l.a)(e),mobile:Object(S.getIsMobile)(e),shouldHideAttachmentButton:Object(A.a)(e),shouldDisableInitialInputFocus:M(e),shouldSendInputStagingEvent:Object(q.a)(),canUploadAttachments:Object(z.a)(e,{thread:t})}},V={closeInitialMessageBubble:C.a,onRemoveAttachment:o.a,onSelectAttachmentFile:c.a,publishMessage:d.a,publishTypingMessage:y.a,toggleOnAndOffInputFocus:k.b,setMessageEditorStagingText:L.c,removeMessageEditorStagingText:L.a};var U=Object(i.connect)(D,V)(v.a),Q=s("nDpY"),W=s.n(Q),G=s("QYOI"),Y=s("mKxs"),K=s("9f1P"),J=s.n(K),X=s("0IK8"),$=s("+KD7"),Z=s("yCEM");var ee=Object(G.Record)({tileBackgroundColor:$.j,tileBorderColor:$.l},"FileAttachmentTheme");var te=Object(G.Record)({width:"auto",minHeight:36,borderColor:$.h,whiteSpace:"normal",lineHeight:"1rem",color:$.h},"QuickReplyTheme");var se=Object(G.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:$.l,borderColor:$.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:$.q,fileAttachmentTheme:ee(),quickReplyTheme:te(),headerBackgroundColor:$.r,headerTextColor:$.q,avatarBackgroundColor:$.a,avatarBorderColor:$.a,avatarTextColor:$.q},"Theme");const ne={[Z.b]:se(),[Z.a]:se(),[Z.c]:se({backgroundColor:$.c,borderColor:$.d})};var ae=Object(r.createContext)(ne),re=s("Ydwr"),ie=s("9C7g"),oe=s.n(ie);oe.a.mapOf(oe.a.recordOf({data:Object(Y.a)("Recipient"),status:a.a.string.isRequired}),Object(Y.a)("RecipientLocator"));const ce=oe.a.mapOf(oe.a.recordOf({data:Object(Y.a)("LegacyRecipient"),status:a.a.string.isRequired}),Object(Y.a)("RecipientLocator"));var le=oe.a.mapOf(oe.a.recordOf({data:Object(Y.a)("ResolvedAttachmentRecord"),status:a.a.string.isRequired}),a.a.string.isRequired),de=s("6OYF"),ue=s("wL7V"),pe=s("0GyJ"),he=s("tY0N");const me=(e,t)=>{const s=X.getSenderId,n=X.getSenderType;return s(e)===s(t)&&n(e)===n(t)},be=e=>(t,s)=>{const n=Object(X.getTimestamp)(t),a=Object(X.getTimestamp)(s);return Math.abs(n-a)>=e};var ge=s("o/5C");const je=(e,t,s,n)=>e===s&&t===n||e===n&&t===s,fe=(e,t)=>{const s=Object(X.getType)(e),n=Object(X.getType)(t);return s===n||je(s,n,pe.a,he.a)},Oe=(e,t)=>Object(ge.e)(e)===Object(ge.e)(t),xe=be(6e4),ye=(e,t)=>{e=Object(ue.a)(e)||e;t=Object(ue.a)(t)||t;return me(e,t)&&fe(e,t)&&Oe(e,t)&&!xe(e,t)};var ve=s("rCfO"),Ce=s("ejs7"),Te=s("SlUU"),we=s("JGJA"),Ie=s("Zui/"),Se=s("9F2+"),ke=s("iapW");const Re=e=>{const t=(Object(Se.a)(e)||Object(G.List)()).find(e=>Object(we.a)("@type",e)===Ie.d);return t?Object(ke.b)(t):Object(G.Map)()},Ae=Object(ve.default)((e,t)=>{e=Object(Ce.a)(e);const s=Re(e);return Object(Te.fileAttachmentIdsInMessage)(e).reduce((e,n)=>{if(t.has(""+n)){const a=t.get(""+n),r=s.get(""+n);let i=a&&a.set("fileId",n);r&&(i=i&&i.set("fileUsageType",r));return e.push(i)}return e},Object(G.List)())});var Ne=s("eoCu"),Pe=s("vIAU");const Ee=(e,t,s,n)=>{const a=!t,r=!ye(e,t),i=!n&&!ye(e,s),o=!s,c={[Pe.a]:a,[Pe.b]:r,[Pe.e]:i,[Pe.c]:o};return Object.keys(c).reduce((e,t)=>c[t]?e.add(t):e,Object(G.Set)())};var Me=s("mNDY");const _e="data-cv-message-history-id";var Fe=s("QgEn");const Le=(e,t)=>!Object.keys(e).some(s=>"fileAttachments"===s||"positionDescriptors"===s||"senders"===s?!Object(G.is)(e[s],t[s]):e[s]!==t[s]),qe=Object(r.memo)(({allowContactPromotions:e,fileAttachments:t,fileAttachmentsForThread:s,friendlyNames:n,indexedAsyncFileAttachments:a,hiddenBy:r,historyConfig:i,message:o,portalId:c,positionDescriptors:l,presentSenderLocators:d,senders:u,legacyRecipients:p,visitorLastReadTimestamp:h,lastMessageId:m,vid:b,recipientVisitors:g,threadHistory:j,threadId:f,ungatedForNextBestActions:O,ungatedForMessageHiding:x,channelName:y,slots:v})=>{const C={[_e]:Object(Ne.a)(o)},T=i[Object(X.getType)(o)];return T?Object(Fe.jsx)("div",Object.assign({},C,{children:Object(Fe.jsx)(T,{allowContactPromotions:e,channelName:y,fileAttachments:t,fileAttachmentsForThread:s,friendlyNames:n,hiddenBy:r,indexedAsyncFileAttachments:a,message:o,portalId:c,positionDescriptors:l,senders:u,legacyRecipients:p,presentSenderLocators:d,visitorLastReadTimestamp:h,lastMessageId:m,vid:b,recipientVisitors:g,threadHistory:j,threadId:f,ungatedForNextBestActions:O,ungatedForMessageHiding:x,slots:v})})):null},Le);qe.displayName="MessageHistoryItem";qe.propTypes={allowContactPromotions:a.a.bool,channelName:a.a.string,fileAttachments:a.a.instanceOf(G.List),fileAttachmentsForThread:a.a.instanceOf(G.Map),hiddenBy:a.a.shape({actorId:a.a.string.isRequired,timestamp:a.a.number.isRequired}),historyConfig:a.a.object.isRequired,indexedAsyncFileAttachments:le,lastMessageId:a.a.string,legacyRecipients:ce,message:a.a.instanceOf(G.Record).isRequired,portalId:a.a.number,positionDescriptors:Me.a.isRequired,presentSenderLocators:a.a.instanceOf(G.Set),recipientVisitors:a.a.instanceOf(G.Map),senders:re.a,slots:a.a.object,threadHistory:Object(Y.a)("ThreadHistory"),threadId:a.a.string,ungatedForMessageHiding:a.a.bool,ungatedForNextBestActions:a.a.bool,vid:a.a.number,visitorLastReadTimestamp:a.a.number};qe.defaultProps={innerRef:()=>{},positionDescriptors:[]};var Be=qe;const He=J.a.div.withConfig({displayName:"MessageHistory__ReflowElement",componentId:"sc-62jcwg-0"})(["z-index:0;padding-top:4px;padding-left:16px;padding-right:16px;flex-shrink:0;@media screen and (max-width:900px){padding-left:8px;padding-right:8px;}"]);class ze extends r.PureComponent{getDontIncludeLastInGroup(e,t){const{messages:s}=this.props,n=s.get(t+2);return!(!n||!ye(e,n))}renderHistory(){const{allowContactPromotions:e,fileAttachments:t,friendlyNames:s,getAdditionalPositionDescriptors:n,historyConfig:a,indexedAsyncFileAttachments:r,lastMessageId:i,messages:o,portalId:c,presentSenderLocators:l,senders:d,ungatedForNextBestActions:u,ungatedForMessageHiding:p,visitorLastReadTimestamp:h,vid:m,recipientVisitors:b,threadHistory:g,threadId:j,legacyRecipients:f,channelName:O,slots:x}=this.props,y=n(o);return o.map((n,v)=>{const C=v>0?o.get(v-1):void 0,T=o.get(v+1);let w;Object(X.getType)(T)===de.a&&(w=this.getDontIncludeLastInGroup(n,v));const I=Ae(n,t);let S=Ee(n,C,T,w);const k=n.toJS(),{hiddenBy:R,id:A}=k;S=S.merge(y.get(A,Object(G.Set)()));return Object(Fe.jsx)(Be,{allowContactPromotions:e,hiddenBy:p?R:void 0,historyConfig:a,fileAttachments:I,fileAttachmentsForThread:t,friendlyNames:s,indexedAsyncFileAttachments:r,portalId:c,positionDescriptors:S,message:n,senders:d,presentSenderLocators:l,visitorLastReadTimestamp:h,lastMessageId:i,vid:m,recipientVisitors:b,ungatedForNextBestActions:u,ungatedForMessageHiding:p,threadHistory:g,threadId:j,legacyRecipients:f,channelName:O,slots:x},Object(Ne.a)(n))})}render(){const{className:e,themeConfig:t}=this.props;return Object(Fe.jsx)(He,{className:e,children:Object(Fe.jsx)(ae.Provider,{value:t,children:this.renderHistory()})})}}ze.displayName="MessageHistory";ze.propTypes={allowContactPromotions:a.a.bool,channelName:a.a.string,className:a.a.string,fileAttachments:a.a.instanceOf(G.Map),friendlyNames:a.a.array,getAdditionalPositionDescriptors:a.a.func,historyConfig:a.a.object.isRequired,indexedAsyncFileAttachments:le,lastMessageId:a.a.string,legacyRecipients:ce,messages:a.a.instanceOf(G.List),portalId:a.a.number,presentSenderLocators:a.a.instanceOf(G.Set),recipientVisitors:a.a.instanceOf(G.Map),senders:re.a,slots:a.a.object,themeConfig:a.a.object,threadHistory:Object(Y.a)("ThreadHistory"),threadId:a.a.string,ungatedForMessageHiding:a.a.bool,ungatedForNextBestActions:a.a.bool,vid:a.a.number,visitorLastReadTimestamp:a.a.number};ze.defaultProps={getAdditionalPositionDescriptors:()=>Object(G.Map)(),fileAttachments:Object(G.Map)(),preventAutoscroll:!1,presentSenderLocators:Object(G.Set)(),scrollContainerToBottom:()=>{},displayEmailDeleteBanner:!1,ungatedForMessageHiding:!1,ungatedForNextBestActions:!1};var De=ze,Ve=s("vVnP");const Ue=Object(r.memo)(({themeConfig:e,children:t})=>Object(Fe.jsx)(Ve.a.Provider,{value:e,children:t}));Ue.displayName="ThemeConfigProvider";Ue.propTypes={children:a.a.node.isRequired,themeConfig:a.a.object};var Qe=Ue,We=s("T25L").a,Ge=s("npjq"),Ye=s("5SRO"),Ke=s("FBcP"),Je=s("HiOC"),Xe=s("OoDT"),$e=s("3oj9"),Ze=s("ZSXR"),et=s("eEyY"),tt=s("MBJP");const st=Object(tt.a)([E.a],Object(N.a)(["hideScrollToButton"])),nt=e=>{const t=Object(Ze.a)(e);return{isLoadingHistory:Object(h.isStarted)(t),loadingHistoryFailed:Object(h.isFailed)(t),sessionId:Object(Ke.getSessionId)(e),threadHistory:Object($e.a)(e),threadId:Object(et.getCurrentThreadId)(e),isOnFocus:R(e),coloring:Object(j.a)(e),hideScrollToButton:st(e)}},at={fetchThreadHistory:Je.fetchThreadHistory};var rt=Object(i.connect)(nt,at)(Xe.a),it=s("0srx"),ot=s("kMm/"),ct=s("pcz0");const lt=Object(it.a)({tileBackgroundColor:$.j}),dt=({coloring:{accentColor:e,textColor:t,useDefaultColor:s}={}})=>({[Z.b]:Object(ct.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:lt}),[Z.a]:Object(ct.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:lt,widgetAccent:s?$.k:e,quickReplyTheme:Object(ot.a)({borderColor:s?$.h:e,color:s?$.k:t})}),[Z.c]:Object(ct.a)({alignItems:"flex-end",backgroundColor:s?$.l:e,borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px 0px 8px 8px",borderWidth:"0px",textColor:s?$.k:t,fileAttachmentTheme:lt,widgetAccent:s?$.k:e})});var ut=s("sl/w"),pt=s("X5NR"),ht=s("PY2H");const mt=J.a.div.withConfig({displayName:"NewThreadPrompt__NewThreadpromptContainer",componentId:"gvh43c-0"})(["padding:32px 20px 12px 20px;text-align:center;width:100%;"]);function bt({createNewThread:e}){return Object(Fe.jsx)(pt.a,{children:t=>Object(Fe.jsxs)(mt,{children:[Object(Fe.jsx)("p",{className:"m-bottom-0",children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.newThreadPrompt.newHeading",options:{locale:t}})}),Object(Fe.jsx)(ht.a,{"data-test-id":"visitor-widget-start-new-thread-button",onClick:e,children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.newThreadPrompt.newButton",options:{locale:t}})})]})})}bt.propTypes={createNewThread:a.a.func.isRequired};bt.displayName="NewThreadPrompt";var gt=bt;const jt=e=>{const{accentColor:t}=Object(j.a)(e);return{accentColor:t}},ft={createNewThread:s("aiuJ").a};var Ot=Object(i.connect)(jt,ft)(gt),xt=s("mIAK");class yt extends r.Component{render(){const{coloring:e,fileAttachments:t,messagesList:s,portalId:n,senders:a,shouldRenderNewThreadPrompt:r}=this.props,i=s.map(e=>{if("INITIAL_MESSAGE"===e.get("@type")){const t=e.get("richText");return t?e.set("richText",t.replace(/\n/g,"<br>")):e}return e});return Object(Fe.jsx)(rt,{messageCount:We(s),shouldScrollToBottom:r,children:Object(Fe.jsx)(Qe,{themeConfig:dt({coloring:e}),children:Object(Fe.jsxs)("div",{children:[Object(Fe.jsx)(xt.a,{children:Object(Fe.jsx)("section",{"aria-label":Ge.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.messageHistory"),children:Object(Fe.jsx)(De,{fileAttachments:t,historyConfig:Ye.a,messages:i,portalId:n,senders:a})})}),r&&Object(Fe.jsx)(Ot,{})]})})})}}yt.propTypes={coloring:a.a.object.isRequired,fileAttachments:a.a.instanceOf(G.Map).isRequired,messagesList:a.a.instanceOf(G.List),portalId:a.a.number.isRequired,senders:a.a.instanceOf(G.Map).isRequired,shouldRenderNewThreadPrompt:a.a.bool.isRequired};yt.displayName="ThreadHistory";var vt=yt,Ct=s("dJw2"),Tt=s("f8gn"),wt=s("TXBG"),It=s("eCQl"),St=s("YibP");const kt=e=>{let t;try{t=Object(Ct.a)(e)}catch(e){Object(It.reportError)({error:Object(St.a)("ConnectedChatHistoryGetMessagesList selector threw: "+e.message,e)});throw e}return{coloring:Object(j.a)(e),fileAttachments:Object(wt.a)(e),messagesList:t,portalId:W.a.get(),senders:Object(Tt.a)(e)}},Rt={};var At=Object(i.connect)(kt,Rt)(vt),Nt=s("yb5F"),Pt=s("y5/z"),Et=s("3yBC"),Mt=s("mriK"),_t=s("7XiC"),Ft=s("qKTc"),Lt=s("Lm/k"),qt=s("8Q5G");const Bt=["children","multiple","accept","onChange","onClick"],Ht=J.a.input.withConfig({displayName:"VizExFileButton__FilePickerInput",componentId:"dd3l6d-0"})(["display:none;"]),zt=e=>{let{children:t,multiple:s,accept:n=[],onChange:a,onClick:i}=e,o=Object(Lt.a)(e,Bt);const c=Object(r.useRef)(null),l=e=>{c.current&&c.current.click();Object(qt.a)(i,e)};return Object(Fe.jsxs)(r.Fragment,{children:[t({onClick:l}),Object(Fe.jsx)(Ht,Object.assign({},o,{ref:c,type:"file",accept:n.join(","),multiple:s,onChange:a}))]})};zt.displayName="VizExFileButton";zt.propTypes={accept:a.a.arrayOf(a.a.string),children:a.a.func.isRequired,multiple:a.a.bool,onChange:a.a.func,onClick:a.a.func};var Dt=zt;const Vt=e=>Object(Fe.jsx)(Dt,{accept:Ft.a,onClick:e.onClick,onChange:e.onChange,children:t=>Object(Fe.jsx)(ht.a,Object.assign({use:"on-bright"},t,{children:e.children}))});Vt.displayName="FilePickerLink";Vt.propTypes={children:a.a.node.isRequired,onChange:a.a.func.isRequired,onClick:a.a.func};var Ut=Vt,Qt=s("gQ5O"),Wt=s("PpSk");const Gt=({attachmentsError:e,dismissAttachmentsError:t,selectAttachmentFile:s,thread:n,trackInteraction:a})=>{const r=()=>{t({threadId:Object(Wt.getThreadId)(n)})},i=({target:{files:e}})=>{if(!e||!e.length)return;const t=e.item(0);s({file:t,thread:n})},o=()=>{a("retry-attachment-upload",{action:"retry attachment upload"})},c=(()=>{switch(e){case Et.b:return Object(Fe.jsx)(ut.a,{message:"cvVisitorUIAttachments.errors.fileSizeExceeded",options:{maxSize:Ge.a.formatSize(Qt.b)}});case Et.c:return Object(Fe.jsx)(ut.a,{message:"cvVisitorUIAttachments.errors.uploadError"});case Et.a:return Object(Fe.jsx)(ut.a,{message:"cvVisitorUIAttachments.errors.invalidFileType"});default:return null}})();return Object(Fe.jsx)(_t.a,{title:c,onClose:r,link:Object(Fe.jsx)(Ut,{onChange:i,onClick:o,children:Object(Fe.jsx)(ut.a,{message:"cvVisitorUIAttachments.tryAgain"})})})};Gt.displayName="AttachmentErrorAlerts";Gt.propTypes={attachmentsError:a.a.oneOf([Et.b,Et.c,Et.a]),dismissAttachmentsError:a.a.func.isRequired,selectAttachmentFile:a.a.func.isRequired,thread:Object(Y.a)("Thread").isRequired,trackInteraction:a.a.func.isRequired};var Yt=Gt;const Kt=({createNewThread:e,fetchOlderThreadHistory:t,networkError:s,startPubSub:n,resubscribe:a})=>{const[i,o]=Object(r.useState)([]),c=()=>{o([...i,s])};if(i.includes(s))return null;const l=(()=>{switch(s){case Mt.b:case Mt.c:case Mt.d:return Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.offline.title"});case Mt.e:return Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});case Mt.a:return Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.newThreadFailure.title"});default:return null}})(),d=(()=>{switch(s){case Mt.e:return Object(Fe.jsx)(ht.a,{use:"on-bright",onClick:t,children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case Mt.a:return Object(Fe.jsx)(ht.a,{use:"on-bright",onClick:e,children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case Mt.d:return Object(Fe.jsx)(ht.a,{use:"on-bright",onClick:a,children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});case Mt.c:return Object(Fe.jsx)(ht.a,{use:"on-bright",onClick:n,children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"})});default:return null}})();return Object(Fe.jsx)(_t.a,{title:l,onClose:c,link:d})};Kt.displayName="NetworkErrorAlerts";Kt.propTypes={createNewThread:a.a.func.isRequired,fetchOlderThreadHistory:a.a.func.isRequired,networkError:a.a.oneOf([Mt.b,Mt.e,Mt.a,Mt.c,Mt.d]).isRequired,resubscribe:a.a.func.isRequired,startPubSub:a.a.func.isRequired};var Jt=Kt;class Xt extends r.Component{render(){const{attachmentsError:e,createNewThread:t,dismissAttachmentsError:s,fetchOlderThreadHistory:n,networkError:a,resubscribe:r,selectAttachmentFile:i,startPubSub:o,thread:c,trackInteraction:l}=this.props;return e?Object(Fe.jsx)(Yt,{attachmentsError:e,dismissAttachmentsError:s,selectAttachmentFile:i,thread:c,trackInteraction:l}):a?Object(Fe.jsx)(Jt,{createNewThread:t,fetchOlderThreadHistory:n,networkError:a,resubscribe:r,startPubSub:o}):null}}Xt.displayName="ChatAreaAlertContainer";Xt.propTypes={attachmentsError:a.a.oneOf([Et.b,Et.c,Et.a]),createNewThread:a.a.func.isRequired,dismissAttachmentsError:a.a.func.isRequired,fetchOlderThreadHistory:a.a.func.isRequired,networkError:a.a.oneOf([Mt.b,Mt.e,Mt.a,Mt.c,Mt.d]),resubscribe:a.a.func.isRequired,selectAttachmentFile:a.a.func.isRequired,startPubSub:a.a.func.isRequired,thread:Object(Y.a)("Thread").isRequired,trackInteraction:a.a.func.isRequired};var $t=Xt,Zt=s("aqNz"),es=s("lRdY"),ts=s("r0yA"),ss=s("eg5p"),ns=s("J4oD"),as=s("021p");const rs=()=>(e,t)=>{const s=t(),n=Object(Ke.getSessionId)(s),a=Object(_.getSelectedThreadId)(s);if(null===a||a===ss.a)return;const r=Object(g.a)(s),i=Object(ns.historyDataForThread)(s,{thread:r}),o=Object(as.e)(i),c=Object(as.f)(i);e(Object(Je.fetchThreadHistory)({offsetOrdinal:o,offsetTimestamp:c,threadId:a,sessionId:n}))};var is=s("5rZi"),os=s("8HpB");const cs=(e,{thread:t})=>({attachmentsError:Object(Zt.a)(e,{thread:t}),networkError:Object(ts.a)(e)}),ls={createNewThread:is.createNewThread,dismissAttachmentsError:es.a,fetchOlderThreadHistory:rs,selectAttachmentFile:c.a,trackInteraction:Pt.trackInteraction,startPubSub:os.startPubSub,resubscribe:Nt.resubscribe};var ds=Object(i.connect)(cs,ls)($t);const us=e=>({thread:Object(g.a)(e)});var ps=Object(i.connect)(us)(ds),hs=s("Qf6G"),ms=s("zs6M"),bs=s("/Dz0"),gs=s("HnnE"),js=s("EjiN"),fs=s("8M+t");const Os=Object(we.a)("gdpr"),xs=Object(p.createSelector)([Os],Object(we.a)("consentToProcessError")),ys=e=>({consentToProcessMessage:Object(gs.a)(e),showGdprConsentToProcessButton:Object(js.a)(e),coloring:Object(j.a)(e),consentToProcessError:xs(e)}),vs={consentToProcess:hs.consentToProcess,closeConsentToProcess:ms.a,dismissConsentToProcessError:bs.b,trackInteraction:Pt.trackInteraction};var Cs=Object(i.connect)(ys,vs)(fs.a),Ts=s("QGYt"),ws=s("HtM0"),Is=s("38AR"),Ss=s("JxxT"),ks=s("Mcxo");const Rs=J.a.div.withConfig({displayName:"ConsentModal__ConsentModalContainer",componentId:"sc-1w92f1h-0"})(["position:absolute;display:flex;align-items:flex-start;justify-content:center;height:calc(100% - ","px);top:","px;width:100%;background-color:rgba(45,62,80,0.79);backdrop-filter:blur(2px);padding-top:20%;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:hidden;"],Ss.b,Ss.b,Is.a,Is.a),As=J.a.div.withConfig({displayName:"ConsentModal__ContentContainer",componentId:"sc-1w92f1h-1"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;background-color:white;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,0.75);margin:0 20px;"]),Ns=J()(ks.a).withConfig({displayName:"ConsentModal__SmallNoParagraphPadding",componentId:"sc-1w92f1h-2"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),Ps=J()(Ts.a).withConfig({displayName:"ConsentModal__FullWidthButton",componentId:"sc-1w92f1h-3"})(["padding:9px 16px;flex:0 1 100%;&:not(:first-child){margin-left:8px;}"]),Es=J.a.div.withConfig({displayName:"ConsentModal__ButtonsContainer",componentId:"sc-1w92f1h-4"})(["display:flex;flex-direction:row;margin:12px 0 0 0;width:100%;"]),Ms=J.a.p.withConfig({displayName:"ConsentModal__Header",componentId:"sc-1w92f1h-5"})(["text-transform:none;font-size:18px;font-weight:500;margin-top:18px;margin-bottom:12px;line-height:normal;"]),_s=({headerMessage:e,message:t,onClick:s,onDeclineClick:n})=>{const[a,i]=Object(r.useState)({isEntering:!0,shouldRender:!0,callback:()=>{}}),o=()=>{if(!a.isEntering){a.callback();i(Object.assign({},a,{shouldRender:!1}))}},c=e=>{i(Object.assign({},a,{isEntering:!1,callback:e}))};return a.shouldRender?Object(Fe.jsx)(Rs,{style:{animation:(a.isEntering?"consent-modal-background-fadeIn":"consent-modal-background-fadeOut")+" .3s"},"data-test-id":"gdpr-consent-prompt-container",onAnimationEnd:o,children:Object(Fe.jsx)(pt.a,{children:r=>Object(Fe.jsxs)(As,{"data-test-id":"gdpr-consent-prompt",style:{animation:(a.isEntering?"consent-modal-content-fadeIn":"consent-modal-content-fadeOut")+" .3s"},children:[e&&Object(Fe.jsx)(Ms,{children:e}),Object(Fe.jsx)(Ns,{use:"help",role:"document",tabIndex:0,"data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(ws.a)(t)}}),Object(Fe.jsxs)(Es,{children:[Object(Fe.jsx)(Ps,{onClick:()=>{c(s)},"data-test-id":"gdpr-consent-agree-button",use:"primary",children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:r}})}),Object(Fe.jsx)(Ps,{onClick:()=>{c(n)},"data-test-id":"gdpr-consent-dismiss-button",children:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-experience-components.buttons.disagree",options:{locale:r}})})]})]},"consent-modal-content-container")})},Math.random+"-consent-modal-container"):null};_s.defaultProps={animationTimeMs:300,onClick:()=>{},onDeclineClick:()=>{}};_s.propTypes={headerMessage:a.a.node,message:a.a.string.isRequired,onClick:a.a.func.isRequired,onDeclineClick:a.a.func.isRequired};_s.displayName="ConsentModal";var Fs=_s,Ls=s("0IL2"),qs=s("k3Ph"),Bs=s("SmyB"),Hs=s("2BFa"),zs=s("49A5"),Ds=s("V9Gp");class Vs extends r.Component{componentDidMount(){const{trackInteraction:e}=this.props;e("widget-interaction",{action:"view consent to cookies"})}render(){return Object(Fe.jsx)(pt.a,{children:e=>this.props.isExitIntentPrompt?Object(Fe.jsx)(Fs,{headerMessage:Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.gdpr.consentToCookies.promptHeader",options:{locale:e}}),message:Ge.a.text("conversations-visitor-ui.gdpr.consentToCookies.exitIntentCookieConsent",{locale:e}),onDeclineClick:this.props.declineCookies,onClick:this.props.consentToCookies,coloring:this.props.coloring}):Object(Fe.jsx)(Ls.a,{message:Ge.a.text("conversations-visitor-ui.gdpr.consentToCookies.pageLoadCookieConsent",{locale:e}),onDeclineClick:this.props.declineCookies,onClick:this.props.consentToCookies,coloring:this.props.coloring,showButton:!0})})}}Vs.displayName="CookieConsentPrompt";Vs.propTypes={coloring:a.a.object,consentToCookies:a.a.func.isRequired,declineCookies:a.a.func.isRequired,isExitIntentPrompt:a.a.bool.isRequired,trackInteraction:a.a.func.isRequired};const Us={consentToCookies:qs.a,declineCookies:Bs.a,trackInteraction:Pt.trackInteraction},Qs=e=>({coloring:Object(j.a)(e),widgetData:Object(zs.getLatestWidgetData)(e),isExitIntentPrompt:Object(Hs.gdprCookieConsentOnExitIntentEnabled)(e)&&!Object(Ds.getAPIEnableWidgetCookieBanner)(e)});var Ws=Object(i.connect)(Qs,Us)(Vs),Gs=s("LSdF"),Ys=s("6gho");const Ks=e=>/https:\/\/(app|local)\.hubspot(qa)?\.com/.test(e.origin),Js=({iframeRef:e,onMessage:t})=>{const s=e&&e.current&&e.current.contentWindow;window.addEventListener("message",e=>{Ks(e)&&e.source===s&&e.data.action===Ys.b.SET_IFRAME_HEIGHT&&t(e.data.value)})};function Xs({langOverride:e,linkType:t,portalId:s,additionalParams:n}){const a=Object(r.useRef)(null),[i,o]=Object(r.useState)();Object(r.useEffect)(()=>{Js({iframeRef:a,onMessage:e=>{o(parseInt(e,10))}})},[a]);return Object(Fe.jsx)("iframe",{style:{width:"100%",border:"none",height:(i||0)+"px"},"aria-label":`hubspot-${t}-viral-iframe`,"data-test-id":"viral-link-iframe",ref:a,src:Object(Gs.d)(t,Object.assign({lang:e,portalId:s},n))})}const $s=J.a.div.withConfig({displayName:"WidgetBranding__ViralFrameContainer",componentId:"sc-1r113bj-0"})(["max-height:22px;min-height:22px;height:22px;"]);class Zs extends r.PureComponent{render(){const{liveChatHref:e,lang:t}=this.props,s=new URL(e).searchParams,n=s.get("intent"),a=s.get("viralSourcePortalId"),r=s.get("hubs_medium"),i=s.get("hubs_campaign");return Object(Fe.jsx)($s,{className:"p-x-1 m-bottom-1 align-center justify-center",children:Object(Fe.jsx)(Xs,{linkType:"live-chat",langOverride:t,additionalParams:{intent:n,viralSourcePortalId:a,hubs_medium:r,hubs_campaign:i}})})}}Zs.displayName="WidgetBranding";var en=Zs,tn=s("sYgu"),sn=s("G53s");const nn=e=>({liveChatHref:Object(tn.a)(e),lang:Object(sn.b)(e)});var an=Object(i.connect)(nn)(en),rn=s("QmIQ");const on=1e3;class cn extends r.PureComponent{constructor(e){super(e);this.state={renderNewThreadPrompt:!e.isThreadStarted}}componentDidUpdate(e){const{isThreadStarted:t,toggleOnAndOffInputFocus:s}=this.props,{isThreadStarted:n}=e;t||t===n||setTimeout(()=>{this.setRenderNewThreadPromptTrue();s(!1)},on);t&&this.state.renderNewThreadPrompt&&this.setRenderNewThreadPromptFalse()}setRenderNewThreadPromptTrue(){this.setState({renderNewThreadPrompt:!0})}setRenderNewThreadPromptFalse(){this.setState({renderNewThreadPrompt:!1})}renderMessageEditor(){const{requiresExplicitConsentToProcess:e,renderCookieConsentPrompt:t}=this.props,{renderNewThreadPrompt:s}=this.state;return e||t||s?null:Object(Fe.jsxs)(r.Fragment,{children:[Object(Fe.jsx)(ps,{}),Object(Fe.jsx)(U,{})]})}renderError(){const e=Object(Fe.jsx)(ut.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});return Object(Fe.jsx)(_t.a,{title:e,onClose:()=>{}})}render(){const{showingGdprProcess:e,showingHsBranding:t,renderCookieConsentPrompt:s}=this.props,{renderNewThreadPrompt:n}=this.state;return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(rn.a,{renderError:this.renderError,errorLoggingTitle:"ConnectedThreadHistory",children:Object(Fe.jsx)(At,{shouldRenderNewThreadPrompt:n})}),s&&Object(Fe.jsx)(Ws,{}),e&&!s&&Object(Fe.jsx)(Cs,{}),this.renderMessageEditor(),t&&Object(Fe.jsx)(an,{})]})}}cn.displayName="UnifiedThreadView";cn.propTypes={isThreadStarted:a.a.bool.isRequired,renderCookieConsentPrompt:a.a.bool.isRequired,requiresExplicitConsentToProcess:a.a.bool.isRequired,showingGdprProcess:a.a.bool.isRequired,showingHsBranding:a.a.bool.isRequired,toggleOnAndOffInputFocus:a.a.func.isRequired};t.a=cn},XXaZ:function(e,t,s){var n=s("uQvf"),a=Object.prototype.hasOwnProperty;function r(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}e.exports=r},XiSY:function(e,t,s){var n=s("3FHW"),a=s("bwj0"),r=s("kmmH"),i=s("QVIP"),o=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,d=Object.prototype,u=l.toString,p=d.hasOwnProperty,h=RegExp("^"+u.call(p).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(e){return!(!r(e)||a(e))&&(n(e)?h:c).test(i(e))}e.exports=m},XjLd:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("JGJA"),a=s("dLEV"),r=s("49A5");const i=Object(a.createSelector)(r.getLatestWidgetData,Object(n.a)("showingHsBranding"))},"Xs/R":function(e,t,s){"use strict";s("Ktcs");var n=s("QgEn");const a=e=>Object(n.jsxs)("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{children:[Object(n.jsx)("defs",{children:Object(n.jsx)("path",{d:"M21.158.222L2.568 11.815c-.8.498-.749 1.215.113 1.591l4.406 1.923 10.395-9.903c1.377-1.296 1.569-1.119.426.395L8.254 18.215v4.927c0 .953.5 1.141 1.113.418l4.473-5.282 5.055 2.207c.861.376 1.643-.092 1.736-1.04l1.81-18.404c.094-.949-.484-1.317-1.283-.819",id:"send__a"})}),Object(n.jsx)("use",{xlinkHref:"#send__a",fillRule:"evenodd"})]}));a.displayName="SVGSend";t.a=a},Ydwr:function(e,t,s){"use strict";var n=s("mKxs"),a=s("VfuR"),r=s.n(a),i=s("9C7g"),o=s.n(i);t.a=o.a.mapOf(o.a.recordOf({data:Object(n.a)("Sender"),status:r.a.string.isRequired}),Object(n.a)("SenderLocator"))},ZAuv:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("2Zef"),a=s("PpSk"),r=s("QYOI"),i=s("nS6h"),o=s("+TdC"),c=s("BvOu"),l=s("cPs9"),d=s("v0wH"),u=s("Wt04"),p=s("rf4d"),h=s("6O34"),m=s("0G/n");const b=({thread:e})=>t=>{const s=Object(a.getChannelName)(e),b=Object(a.getThreadId)(e),g=n.VISITOR_SENDER,j=Object(l.a)(g),f=Object(u.getMessagesUtk)(),O={type:m.a,value:f},x=Object(r.List)([{deliveryIdentifier:O}]),y=new o.a({id:Object(c.generateUuid)(),typingState:null,sender:{"@type":g,[j]:f},status:{messageStatus:d.b},genericChannelId:p.d,senders:Object(h.a)(x)});t(Object(i.publishMessageToConversation)({channel:s,message:y,threadId:b}))}},aqNz:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("dLEV"),a=s("JGJA"),r=s("UfQw"),i=s("PpSk"),o=s("ye6p");const c=Object(n.createSelector)([r.a,o.a],(e,t)=>{const s=Object(i.getThreadId)(t);return Object(a.a)(s,e)||null})},bwj0:function(e,t,s){var n,a=s("DOHQ"),r=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";function i(e){return!!r&&r in e}e.exports=i},ccWV:function(e,t,s){var n=s("LPlp"),a=Array.prototype.splice;function r(e){var t=this.__data__,s=n(t,e);if(s<0)return!1;s==t.length-1?t.pop():a.call(t,s,1);--this.size;return!0}e.exports=r},d1Q1:function(e,t,s){var n=s("5els"),a=s("p1fP"),r=s("Vsm7"),i=s("wID2"),o=s("BB3q");function c(e){var t=-1,s=null==e?0:e.length;this.clear();for(;++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n;c.prototype.delete=a;c.prototype.get=r;c.prototype.has=i;c.prototype.set=o;e.exports=c},dByS:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Zulv"),a=s("xr6y"),r=s("Ktcs"),i=s("okxY");function o(e,t,s){let{isDisabled:o,trigger:c}=e,l=Object(n.o)(),d=Object(r.useRef)(!1),u=Object(r.useRef)(!1),p=()=>{(d.current||u.current)&&t.open(u.current)},h=e=>{d.current||u.current||t.close(e)};Object(r.useEffect)(()=>{let e=e=>{s&&s.current&&"Escape"===e.key&&t.close(!0)};if(t.isOpen){document.addEventListener("keydown",e,!0);return()=>{document.removeEventListener("keydown",e,!0)}}},[s,t]);let m=()=>{if("focus"!==c){"pointer"===Object(a.a)()?d.current=!0:d.current=!1;p()}},b=()=>{if("focus"!==c){u.current=!1;d.current=!1;h()}},g=()=>{u.current=!1;d.current=!1;h(!0)},j=()=>{if(Object(a.b)()){u.current=!0;p()}},f=()=>{u.current=!1;d.current=!1;h(!0)},{hoverProps:O}=Object(a.f)({isDisabled:o,onHoverStart:m,onHoverEnd:b}),{pressProps:x}=Object(a.j)({onPressStart:g}),{focusableProps:y}=Object(i.e)({isDisabled:o,onFocus:j,onBlur:f},s);return{triggerProps:Object.assign({"aria-describedby":t.isOpen?l:void 0},Object(n.i)(y,O,x)),tooltipProps:{id:l}}}},dJw2:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("x32n"),a=s("dLEV"),r=s("5SRO"),i=s("4nf7");const o=!1,c=Object(a.createSelector)([i.a],e=>Object(n.insertDateMessagesWithHistoryConfig)(e,r.a,o))},ejMo:function(e,t,s){"use strict";var n=s("QYOI"),a=s("6GFX");class r extends(Object(n.Record)({file:null,localId:"",fileId:-1,uploadProgress:0},"FileUploadRecord")){constructor(e={}){super(Object.assign({},e,{localId:Object(a.generateIdForFile)({file:e.file||null,timestamp:Date.now()})}))}}t.a=r},eoCu:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("MJM1");const a=e=>Object(n.a)(["id"],e)||Object(n.a)(["message","id"],e)||-1},evSZ:function(e,t,s){"use strict";var n=s("dLEV"),a=s("MJM1");const r=Object(a.a)(["isAttachmentDisabled"]);var i=s("QnHA");s.d(t,"a",(function(){return o}));const o=Object(n.createSelector)([i.a],e=>r(e))},f8gn:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("MZef"),a=s("N7dr"),r=s("KXN9"),i=s("x1JE"),o=s("QYOI"),c=s("dLEV"),l=s("g4ag"),d=s("W/er"),u=s("8FuJ"),p=s("BYz9");const h=Object(c.createSelector)([d.getResponders],e=>Object(i.getEntries)(e).reduce((e,t,s)=>{const i=Object(r.a)(t);return Object(l.a)([Object(p.a)(s)],Object(n.a)({[a.a]:i?Object(u.a)(i):null,[a.c]:Object(r.c)(t)}),e)},Object(o.Map)()))},"g/uM":function(e,t,s){"use strict";var n=s("Lm/k"),a=s("VfuR"),r=s.n(a);const i="javascript:void(0)",o=/^([^:]+):/,c=/[\s\x00-\x1f]/g,l=e=>{if(e&&"string"==typeof e){const t=e.match(o);if(!t||e===i)return!1;if("javascript:"===t[0].replace(c,"").toLowerCase())return!0}return!1};var d=s("9f1P"),u=s.n(d),p=s("QgEn");const h=["src"],m=u.a.img.withConfig({displayName:"VizExImage__StyledImg",componentId:"sc-17hgjga-0"})(["display:block;height:auto;max-width:100%;"]),b=e=>{const{src:t}=e,s=Object(n.a)(e,h),a=l(t);a&&console.warn("VizExImage was given an unsafe src, defaulting to empty.");return Object(p.jsx)(m,Object.assign({},s,{src:a?void 0:t}))};b.propTypes={src:r.a.string.isRequired};b.displayName="VizExImage";t.a=b},gQ5O:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s.d(t,"b",(function(){return a}));s.d(t,"c",(function(){return r}));const n="filemanager/api",a=10485760,r=95},gygH:function(e,t,s){"use strict";s.r(t);s.d(t,"handleAttachmentUploadProgress",(function(){return r}));var n=s("gQ5O"),a=s("qgyf");const r=({localId:e,threadId:t,loaded:s,total:r})=>i=>{const o=s/r*n.c;i(Object(a.attachmentUploadProgress)({localId:e,threadId:t,progress:o}))}},iao3:function(e,t,s){"use strict";s.r(t);var n=s("9Utk"),a=s.n(n),r=s("Ozt8"),i=s("mlLV");const o=1e3;s.d(t,"inputStagingEvent",(function(){return c}));s.d(t,"debouncedStagingEvent",(function(){return l}));const c=(e,t=!1)=>{Object(r.postExternalApiEvent)({eventType:i.INPUT_STAGING,payload:{visitorMessageData:e,isEmptyInput:t}})},l=a()(c,o)},jM00:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("QYOI"),a=s("dLEV"),r=s("JGJA"),i=s("eEyY"),o=s("IGxS");const c=Object(a.createSelector)([o.a,i.getCurrentThreadId],(e,t)=>{const s=Object(r.a)(t,e);return s?s.toList():Object(n.List)()})},jVj2:function(e,t,s){"use strict";s.r(t);s.d(t,"removeAttachment",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.g,({localId:e,threadId:t})=>({payload:{localId:e,threadId:t}}))},l6Ux:function(e,t,s){"use strict";s.r(t);s.d(t,"isUploadCompleted",(function(){return a}));var n=s("ughT");const a=e=>-1!==Object(n.getFileId)(e)},lMvc:function(e,t,s){var n=s("uQvf"),a="__lodash_hash_undefined__",r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;if(n){var s=t[e];return s===a?void 0:s}return r.call(t,e)?t[e]:void 0}e.exports=i},lRdY:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.f,({threadId:e})=>({payload:{threadId:e}}))},le4V:function(e,t,s){"use strict";var n=s("dLEV"),a=s("DdHT"),r=s("ZqFO"),i=s("VvTX");const o=Object(a.a)(r.f,i.getGdprConsentToCommunicateEnabled);var c=s("49A5");s.d(t,"a",(function(){return l}));const l=Object(n.createSelector)([c.getLatestWidgetData],e=>o(e))},lnDz:function(e,t,s){"use strict";s.r(t);s.d(t,"attachmentUploadComplete",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.b,({localId:e,threadId:t,fileId:s,uploadedFile:n})=>({payload:{localId:e,threadId:t,fileId:s,uploadedFile:n}}))},"lw+E":function(e,t,s){"use strict";var n=s("npjq"),a=s("JGJA"),r=s("Mx3c");const i="avatar",o="data",c="email",l="firstName",d="id",u="lastName",p="senderType",h="status";s.d(t,"a",(function(){return m}));s.d(t,"d",(function(){return b}));s.d(t,"e",(function(){return g}));s.d(t,"f",(function(){return j}));s.d(t,"g",(function(){return f}));s.d(t,"h",(function(){return O}));s.d(t,"b",(function(){return x}));s.d(t,"i",(function(){return y}));s.d(t,"c",(function(){return v}));const m=Object(a.a)(i),b=Object(a.a)(c),g=Object(a.a)(l),j=Object(a.a)(d),f=Object(a.a)(u),O=Object(a.a)(p),x=Object(a.a)(o),y=Object(a.a)(h),v=e=>{const t=g(e),s=f(e),a=b(e),i=O(e);return t&&s?`${t} ${s}`:t||(a||(i===r.VISITOR?n.a.text("conversations-message-history.responder.unknownVisitorAvatar"):null))}},mMAp:function(e,t,s){var n=s("LPlp");function a(e){return n(this.__data__,e)>-1}e.exports=a},mNDY:function(e,t,s){"use strict";var n=s("VfuR"),a=s.n(n),r=s("9C7g"),i=s("vIAU");const o=a.a.oneOf([i.a,i.b,i.c,i.e,i.d,i.f,i.g]).isRequired;t.a=Object(r.setOf)(o)},mYRe:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("JGJA");const a=Object(n.a)("resolvedAttachments")},mriK:function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));s.d(t,"e",(function(){return a}));s.d(t,"a",(function(){return r}));s.d(t,"d",(function(){return i}));s.d(t,"c",(function(){return o}));const n="NETWORK_OFFLINE",a="THREAD_HISTORY_FAILED",r="CREATE_NEW_THREAD_FAILED",i="SUBSCRIPTIONS_FAILED",o="PUBSUB_FAILED"},n6o2:function(e,t,s){"use strict";s.r(t);s.d(t,"getFileName",(function(){return r}));var n=s("JGJA"),a=s("ughT");const r=e=>{const t=Object(a.getFile)(e);return t&&Object(n.a)("name",t)||""}},oLsC:function(e,t,s){"use strict";var n=s("QYOI");const a=Object(n.Record)({avatar:null,email:null,firstName:null,id:null,lastName:null,senderType:null},"Sender");t.a=a},p1fP:function(e,t,s){var n=s("QhUm");function a(e){var t=n(this,e).delete(e);this.size-=t?1:0;return t}e.exports=a},pDio:function(e,t,s){var n=s("XiSY"),a=s("/TWJ");function r(e,t){var s=a(e,t);return n(s)?s:void 0}e.exports=r},qKTc:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=["video/*","audio/*","application/json","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/msword","application/pdf","application/zip","application/x-zip","application/x-zip-compressed","application/x-7z-compressed","application/gzip","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/postscript","image/gif","image/jpeg","image/jpg","image/png","image/tiff","text/calendar","text/css","text/csv","text/plain","text/xml"]},qgyf:function(e,t,s){"use strict";s.r(t);s.d(t,"attachmentUploadProgress",(function(){return r}));var n=s("dLEV"),a=s("OIId");const r=Object(n.createAction)(a.c,({localId:e,threadId:t,progress:s})=>({payload:{localId:e,threadId:t,progress:s}}))},r0yA:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("dLEV"),a=s("JGJA"),r=s("mriK"),i=s("Pda3"),o=s("KXN9"),c=s("Ryja"),l=s("BxyF"),d=s("ZSXR");const u=e=>e.clientData.isPubNubClientConnected,p=Object(a.a)("subscriptions"),h=Object(n.createSelector)([d.a,c.getAsyncStagedThread,p,l.getAsyncPubSubClient,u],(e,t,s,n,a)=>{if(Object(i.isFailed)(e))return r.e;if(Object(i.isFailed)(t)){const e=Object(o.b)(t),s=e&&418===e.status;if(!e||!s)return r.a}return Object(i.isFailed)(s)?r.d:Object(i.isFailed)(n)?r.c:a?null:r.b})},rF4n:function(e,t,s){"use strict";s.r(t);var n=s("Lm/k"),a=s("9f1P"),r=s.n(a),i=s("57op");const o=i.b,c=i.a,l=i.i,d=()=>"#f5f8fa",u=()=>"#eaf0f6";var p=s("VfuR"),h=s.n(p),m=s("CR0J"),b=s("QgEn");const g=["processing","preview","fileName","fileInfo","children","theme"],j=({theme:e})=>Object(a.css)(["color:",";background-color:",";"],o(e),c(e)),f=r.a.div.withConfig({displayName:"VizExFileAttachment__AttachmentWrapper",componentId:"sc-19e5sql-0"})(["display:flex;font-size:12px;padding:12px;padding-right:32px;border-radius:3px;position:relative;max-width:100%;flex-direction:row;background-color:",";border:1px solid ",";color:",";",";"],()=>d(),()=>u(),({theme:e})=>l(e),({theme:e,processing:t})=>t&&j({theme:e})),O=r.a.div.withConfig({displayName:"VizExFileAttachment__ContentWrapper",componentId:"sc-19e5sql-1"})(["display:flex;position:relative;max-width:100%;> *:nth-child(2){padding-left:12px;}"]),x=r.a.div.withConfig({displayName:"VizExFileAttachment__PreviewWrapper",componentId:"sc-19e5sql-2"})(["overflow-y:hidden;overflow-x:hidden;align-items:center;display:flex;flex-basis:auto;justify-content:center;flex-shrink:0;font-size:32px;max-height:32px;width:32px;"]),y=r.a.div.withConfig({displayName:"VizExFileAttachment__FileInfoWrapper",componentId:"sc-19e5sql-3"})(["flex-grow:1;flex-shrink:0;flex-basis:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@media all and (-ms-high-contrast:none){flex-basis:auto;max-width:100%;padding-right:12px;}"]),v=r.a.b.withConfig({displayName:"VizExFileAttachment__FileName",componentId:"sc-19e5sql-4"})(["font-weight:600;font-size:12px;line-height:12px;"]),C=r.a.div.withConfig({displayName:"VizExFileAttachment__FileInfo",componentId:"sc-19e5sql-5"})(["font-size:12px;line-height:12px;"]),T=e=>{const{processing:t,preview:s,fileName:a,fileInfo:r,children:i,theme:o}=e,c=Object(n.a)(e,g);return Object(b.jsxs)(f,Object.assign({},c,{theme:o,processing:t,children:[i,Object(b.jsxs)(O,{children:[s&&Object(b.jsx)(x,{children:s}),Object(b.jsxs)(y,{children:[Object(b.jsx)(v,{children:a}),Object(b.jsx)(C,{children:r})]})]})]}))};T.propTypes={children:h.a.node,fileInfo:h.a.node,fileName:h.a.node,preview:h.a.node,processing:h.a.bool,theme:m.a};T.displayName="VizExFileAttachment";t.default=T},uIOU:function(e,t,s){var n=s("QG41"),a=s("6upE"),r=s("lMvc"),i=s("XXaZ"),o=s("KLi6");function c(e){var t=-1,s=null==e?0:e.length;this.clear();for(;++t<s;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n;c.prototype.delete=a;c.prototype.get=r;c.prototype.has=i;c.prototype.set=o;e.exports=c},uQvf:function(e,t,s){var n=s("pDio")(Object,"create");e.exports=n},vIAU:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s.d(t,"b",(function(){return a}));s.d(t,"e",(function(){return r}));s.d(t,"c",(function(){return i}));s.d(t,"d",(function(){return o}));s.d(t,"f",(function(){return c}));s.d(t,"g",(function(){return l}));const n="FIRST",a="FIRST_IN_GROUP",r="LAST_IN_GROUP",i="LAST",o="LAST_COMMON_MESSAGE",c="LAST_NON_FWD_MESSAGE",l="LAST_READ_RECEIPT_MESSAGE"},vVnP:function(e,t,s){"use strict";s.d(t,"b",(function(){return o}));var n=s("+KD7"),a=s("Ktcs"),r=s("yCEM"),i=s("pcz0");const o={[r.b]:Object(i.a)(),[r.a]:Object(i.a)(),[r.c]:Object(i.a)({backgroundColor:n.c,borderColor:n.d,alignItems:"flex-end"})},c=Object(a.createContext)(o);t.a=c},"w/SM":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=1024},w1Zi:function(e,t,s){"use strict";var n=s("1HZx"),a=s("Syy6"),r=s.n(a),i=s("VfuR"),o=s.n(i),c=s("Ktcs"),l=s("QVu+"),d=s("1EAY"),u=s("mKxs"),p=s("gQ5O"),h=s("QYOI"),m=s("8f3s"),b=s("qKTc"),g=s("iao3"),j=s("QgEn");class f extends c.PureComponent{constructor(e){super(e);this.publishTypingMessage=r()(this.props.publishTypingMessage,l.a,{leading:!0,trailing:!1});this.onChatInputChanged=this.onChatInputChanged.bind(this);this.onPublishMessage=this.onPublishMessage.bind(this);this.onSelectAttachmentFiles=this.onSelectAttachmentFiles.bind(this);this.onRemoveAttachment=this.onRemoveAttachment.bind(this);this.inputStagingEvent=g.debouncedStagingEvent}onChatInputChanged(e){const{currentConversation:t,disablePublish:s,shouldSendInputStagingEvent:n,showInitialMessageBubble:a,setMessageEditorStagingText:r}=this.props;r(e);s||""===e||this.publishTypingMessage({thread:t});n&&this.inputStagingEvent(e,!1);a&&this.props.closeInitialMessageBubble()}onPublishMessage({text:e,richText:t,quickReply:s}){const{messagesPageUri:n,publishMessage:a,stagedAttachments:r,removeMessageEditorStagingText:i}=this.props;this.publishTypingMessage.cancel();a({text:e,richText:t,quickReply:s,url:n,fileAttachment:Object(m.a)(r)});i()}onSelectAttachmentFiles({files:e}){if(!e||!e.length)return;const{onSelectAttachmentFile:t,currentConversation:s}=this.props;t({file:e.item(0),thread:s})}onRemoveAttachment({attachment:e}){const{currentConversation:t,onRemoveAttachment:s}=this.props;s({attachment:e,thread:t})}render(){const{coloring:e,currentConversation:t,disablePublish:s,disableTextInput:a,isOnFocus:r,mobile:i,networkOffline:o,shouldDisableInitialInputFocus:c,shouldHideAttachmentButton:l,shouldSendInputStagingEvent:u,showingHsBranding:h,stagedAttachments:m,toggleOnAndOffInputFocus:g,stagedMessage:f,showQuickReplyPlaceholder:O,canUploadAttachments:x}=this.props;return Object(j.jsx)(n.a,{coloring:e,chatInputChanged:this.onChatInputChanged,disabled:a,disablePublish:s,isOnFocus:r,maxAttachmentFileSize:p.b,mobile:i,networkOffline:o,onSelectAttachmentFiles:this.onSelectAttachmentFiles,onRemoveAttachment:this.onRemoveAttachment,publishMessage:this.onPublishMessage,shouldHideAttachmentButton:l,shouldDisableInitialInputFocus:c,showingHsBranding:h,stagedAttachments:m,stagedMessageEditorText:f,supportsAttachments:Object(d.isPersistedThread)(t),toggleOnAndOffInputFocus:g,fileTypes:b.a,showQuickReplyPlaceholder:O,shouldSendInputStagingEvent:u,inputStaging:this.inputStagingEvent,canUploadAttachments:x})}}f.displayName="MessageEditorWrapper";f.propTypes={canUploadAttachments:o.a.bool.isRequired,closeInitialMessageBubble:o.a.func.isRequired,coloring:o.a.object.isRequired,currentConversation:Object(u.a)("Thread"),disablePublish:o.a.bool.isRequired,disableTextInput:o.a.bool.isRequired,isOnFocus:o.a.bool.isRequired,messagesPageUri:o.a.string,mobile:o.a.bool,networkOffline:o.a.bool.isRequired,onRemoveAttachment:o.a.func.isRequired,onSelectAttachmentFile:o.a.func.isRequired,publishMessage:o.a.func.isRequired,publishTypingMessage:o.a.func.isRequired,removeMessageEditorStagingText:o.a.func.isRequired,setMessageEditorStagingText:o.a.func.isRequired,shouldDisableInitialInputFocus:o.a.bool.isRequired,shouldHideAttachmentButton:o.a.bool.isRequired,shouldSendInputStagingEvent:o.a.bool.isRequired,showInitialMessageBubble:o.a.bool.isRequired,showQuickReplyPlaceholder:o.a.bool.isRequired,showingHsBranding:o.a.bool.isRequired,stagedAttachments:o.a.instanceOf(h.List),stagedMessage:o.a.string,toggleOnAndOffInputFocus:o.a.func};t.a=f},wID2:function(e,t,s){var n=s("QhUm");function a(e){return n(this,e).has(e)}e.exports=a},x32n:function(e,t,s){"use strict";s.r(t);var n=s("QYOI"),a=s("BW+T"),r=s.n(a),i=s("0IK8"),o=s("b9/n");var c=Object(n.Record)({[o.b]:o.a,timestamp:null,id:null},"DateMessage");const l=(e,t)=>{const s=new Date(Object(i.getTimestamp)(e)),n=new Date(Object(i.getTimestamp)(t));return s.getFullYear()!==n.getFullYear()||s.getMonth()!==n.getMonth()||s.getDate()!==n.getDate()},d=(e,t,s)=>!(!t&&!s)&&Boolean(Object(i.getTimestamp)(e)&&(!t||l(t,e)));var u=s("eoCu");const p=r()(c,({id:e})=>e),h=(e,t=!0,s=(()=>!0))=>e.reduce((n,a,r)=>{const o=r>0?e.get(r-1):void 0;d(a,o,t)&&s(a)&&(n=n.push(p({id:Object(u.a)(a)+"-date",timestamp:Object(i.getTimestamp)(a)})));return n.push(a)},Object(n.List)());s.d(t,"insertDateMessagesWithHistoryConfig",(function(){return m}));const m=(e,t={},s=!0)=>h(e,s,e=>{const s=Object(i.getType)(e);return t[s]})},xAl4:function(e,t,s){"use strict";s.r(t);s.d(t,"uploadAttachmentClient",(function(){return a}));var n=s("0JoJ");const a=({formData:e,uploadUrl:t,onProgress:s=(()=>{})})=>n.a.post(t,{headers:{"content-type":!1},data:e,timeout:0,withXhr:e=>{e.upload.addEventListener("progress",s,!1)}})},xP7N:function(e,t){function s(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=s},yCEM:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));s.d(t,"b",(function(){return a}));s.d(t,"c",(function(){return r}));const n="agent",a="default",r="visitor"},z4Bj:function(e,t,s){"use strict";function n(){let e=()=>{},t=()=>{};return{promise:new Promise((s,n)=>{e=s;t=n}),resolve:e,reject:t}}t.a=n},zB5l:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("dLEV"),a=s("KSjU"),r=s("QeSX");const i=Object(n.createSelector)([r.getAssignedResponderInWidget],e=>Boolean(e&&Object(a.a)(e)))}}]);
//# sourceMappingURL=//static.hsappstatic.net/conversations-visitor-ui/static-1.19158/threadview-utv.js.map